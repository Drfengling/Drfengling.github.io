<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>浅梦博客</title>
  
  
  <link href="https://drfengling.github.io/atom.xml" rel="self"/>
  
  <link href="https://drfengling.github.io/"/>
  <updated>2022-05-12T08:44:34.645Z</updated>
  <id>https://drfengling.github.io/</id>
  
  <author>
    <name>浅梦风凌</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nginx配置详解及设置代理服务器</title>
    <link href="https://drfengling.github.io/qm/ec296788.html"/>
    <id>https://drfengling.github.io/qm/ec296788.html</id>
    <published>2022-05-12T07:45:38.000Z</published>
    <updated>2022-05-12T08:44:34.645Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>nginx配置详解及设置代理服务器</p><ol><li>nginx简单介绍<br>Nginx是⼀款⾃由的、开源的、⾼性能的HTTP服务器和反向代理服务器；同时也是⼀个IMAP、POP3、SMTP代理服务器；Nginx可以作<br>为⼀个HTTP服务器进⾏⽹站的发布处理，另外Nginx可以作为反向代理进⾏负载均衡的实现。通常我们主要使⽤nginx作为服务代理和负载<br>均衡。本⽂主要介绍如何使⽤nginx作为服务代理的。</li><li>nginx安装<br><a href="https://nginx.org/">https://nginx.org/</a><br>版本介绍<br><img src="/qm/ec296788/1.png"><br>Mainline version 处于开发阶段的版本<br>Stable version 属于比较稳定的版本,建议使用该版本<br>Legacy versions 一些旧的版本<br>下载后进行解压(Windows版本和Linux版本的目录结果都是一样的)<br><img src="/qm/ec296788/2.png"><br>conf 主要的配置文件<br>nginx.exe 启动文件<br>cmd命令行都可以启动nginx服务</li><li>nginx配置文件详解<br>Nginx服务代理和负载均衡都可以通过修改conf/nginx.conf文件进行配置</li><li>1nginx.conf文件配置属性详解<br>通过记事本或者其他软件打开时的内容如下所示(#号表示注释)<br>为了方便阅读,我直接在代码旁对各个属性进行解释<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义Nginx运⾏的⽤户和⽤户组</span></span><br><span class="line">user www www;</span><br><span class="line"><span class="comment">#nginx进程数，建议设置为等于CPU总核⼼数。</span></span><br><span class="line">worker_processes 8;</span><br><span class="line"><span class="comment">#全局错误⽇志定义类型，[ debug | info | notice | warn | error | crit ]</span></span><br><span class="line">error_log /usr/local/nginx/logs/error.log info;</span><br><span class="line"><span class="comment">#进程pid⽂件</span></span><br><span class="line">pid /usr/local/nginx/logs/nginx.pid;</span><br><span class="line"><span class="comment">#指定进程可以打开的最⼤描述符：数⽬</span></span><br><span class="line"><span class="comment">#⼯作模式与连接数上限</span></span><br><span class="line"><span class="comment">#这个指令是指当⼀个nginx进程打开的最多⽂件描述符数⽬，理论值应该是最多打开⽂件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均</span></span><br><span class="line">匀，所以最好与<span class="built_in">ulimit</span> -n 的值保持⼀致。</span><br><span class="line"><span class="comment">#现在在linux 2.6内核下开启⽂件打开数为65535，worker_rlimit_nofile就相应应该填写65535。</span></span><br><span class="line"><span class="comment">#这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。</span></span><br><span class="line">worker_rlimit_nofile 65535;</span><br><span class="line">events</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">#参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型</span></span><br><span class="line">    <span class="comment">#是Linux 2.6以上版本内核中的⾼性能⽹络I/O模型，linux建议epoll，如果跑在FreeBSD上⾯，就⽤kqueue模型。</span></span><br><span class="line">    <span class="comment">#补充说明：</span></span><br><span class="line">    <span class="comment">#与apache相类，nginx针对不同的操作系统，有不同的事件模型</span></span><br><span class="line">    <span class="comment">#A）标准事件模型</span></span><br><span class="line">    <span class="comment">#Select、poll属于标准事件模型，如果当前系统不存在更有效的⽅法，nginx会选择select或poll</span></span><br><span class="line">    <span class="comment">#B）⾼效事件模型</span></span><br><span class="line">    <span class="comment">#Kqueue：使⽤于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使⽤双处理器的MacOS X系统使⽤kqueue可能会造成内核崩溃。</span></span><br><span class="line">    <span class="comment">#Epoll：使⽤于Linux内核2.6版本及以后的系统。</span></span><br><span class="line">    <span class="comment">#/dev/poll：使⽤于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。</span></span><br><span class="line">    <span class="comment">#Eventport：使⽤于Solaris 10。为了防⽌出现内核崩溃的问题，有必要安装安全补丁。</span></span><br><span class="line">    use epoll;</span><br><span class="line">    <span class="comment">#单个进程最⼤连接数（最⼤连接数=连接数*进程数）</span></span><br><span class="line">    <span class="comment">#根据硬件调整，和前⾯⼯作进程配合起来⽤，尽量⼤，但是别把cpu跑到100%就⾏。每个进程允许的最多连接数，理论上每台nginx服务器的最⼤连接数为</span></span><br><span class="line">。</span><br><span class="line">    worker_connections 65535;</span><br><span class="line">    <span class="comment">#keepalive超时时间。</span></span><br><span class="line">    keepalive_timeout 60;</span><br><span class="line">    <span class="comment">#客户端请求头部的缓冲区⼤⼩。这个可以根据你的系统分页⼤⼩来设置，⼀般⼀个请求头的⼤⼩不会超过1k，不过由于⼀般系统分页都要⼤于1k，所以这⾥</span></span><br><span class="line">设置为分页⼤⼩。</span><br><span class="line">    <span class="comment">#分页⼤⼩可以⽤命令getconf PAGESIZE 取得。</span></span><br><span class="line">    <span class="comment">#[root@web001 ~]# getconf PAGESIZE</span></span><br><span class="line">    <span class="comment">#4096</span></span><br><span class="line">    <span class="comment">#但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页⼤⼩”的整倍数。</span></span><br><span class="line">    client_header_buffer_size 4k;</span><br><span class="line">    <span class="comment">#这个将为打开⽂件指定缓存，默认是没有启⽤的，max指定缓存数量，建议和打开⽂件数⼀致，inactive是指经过多长时间⽂件没被请求后删除缓存。</span></span><br><span class="line">open_file_cache max=65535 inactive=60s;</span><br><span class="line">    <span class="comment">#这个是指多长时间检查⼀次缓存的有效信息。</span></span><br><span class="line">    <span class="comment">#语法:open_file_cache_valid time 默认值:open_file_cache_valid 60 使⽤字段:http, server, location 这个指令指定了何时需要检查open_file_cache中缓存项</span></span><br><span class="line">⽬的有效信息.</span><br><span class="line">    open_file_cache_valid 80s;</span><br><span class="line">    <span class="comment">#open_file_cache指令中的inactive参数时间内⽂件的最少使⽤次数，如果超过这个数字，⽂件描述符⼀直是在缓存中打开的，如上例，如果有⼀个⽂件在ina</span></span><br><span class="line">ctive时间内⼀次没被使⽤，它将被移除。</span><br><span class="line">    <span class="comment">#语法:open_file_cache_min_uses number 默认值:open_file_cache_min_uses 1 使⽤字段:http, server, location  这个指令指定了在open_file_cache指令⽆</span></span><br><span class="line">效的参数中⼀定的时间范围内可以使⽤的最⼩⽂件数,如果使⽤更⼤的值,⽂件描述符在cache中总是打开状态.</span><br><span class="line">    open_file_cache_min_uses 1;</span><br><span class="line">    <span class="comment">#语法:open_file_cache_errors on | off 默认值:open_file_cache_errors off 使⽤字段:http, server, location 这个指令指定是否在搜索⼀个⽂件是记录cache错</span></span><br><span class="line">误.</span><br><span class="line">    open_file_cache_errors on;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#设定http服务器，利⽤它的反向代理功能提供负载均衡⽀持</span></span><br><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">#⽂件扩展名与⽂件类型映射表</span></span><br><span class="line">    include mime.types;</span><br><span class="line">    <span class="comment">#默认⽂件类型</span></span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    <span class="comment">#默认编码</span></span><br><span class="line">    <span class="comment">#charset utf-8;</span></span><br><span class="line">    <span class="comment">#服务器名字的hash表⼤⼩</span></span><br><span class="line">    <span class="comment">#保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表</span></span><br><span class="line">的⼤⼩，并且是⼀路处理器缓存⼤⼩的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找<span class="built_in">hash</span>表键值成为可能。如果<span class="built_in">hash</span> bucket size等于⼀路处</span><br><span class="line">理器缓存的⼤⼩，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第⼀次是确定存储单元的地址，第⼆次是在存储单元中查找键值。因此，如果</span><br><span class="line">Nginx给出需要增⼤<span class="built_in">hash</span> max size 或 <span class="built_in">hash</span> bucket size的提⽰，那么⾸要的是增⼤前⼀个参数的⼤⼩.</span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line">    <span class="comment">#客户端请求头部的缓冲区⼤⼩。这个可以根据你的系统分页⼤⼩来设置，⼀般⼀个请求的头部⼤⼩不会超过1k，不过由于⼀般系统分页都要⼤于1k，所以这</span></span><br><span class="line">⾥设置为分页⼤⼩。分页⼤⼩可以⽤命令getconf PAGESIZE取得。</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    <span class="comment">#客户请求头缓冲⼤⼩。nginx默认会⽤client_header_buffer_size这个buffer来读取header值，如果header过⼤，它会使⽤large_client_header_buffers来读</span></span><br><span class="line">取。</span><br><span class="line">    large_client_header_buffers 4 64k;</span><br><span class="line">    <span class="comment">#设定通过nginx上传⽂件的⼤⼩</span></span><br><span class="line">    client_max_body_size 8m;</span><br><span class="line">    <span class="comment">#开启⾼效⽂件传输模式，sendfile指令指定nginx是否调⽤sendfile函数来输出⽂件，对于普通应⽤设为 on，如果⽤来进⾏下载等应⽤磁盘IO重负载应⽤，可</span></span><br><span class="line">设置为off，以平衡磁盘与⽹络I/O处理速度，降低系统的负载。注意：如果图⽚显⽰不正常把这个改成off。</span><br><span class="line">    <span class="comment">#sendfile指令指定 nginx 是否调⽤sendfile 函数（zero copy ⽅式）来输出⽂件，对于普通应⽤，必须设为on。如果⽤来进⾏下载等应⽤磁盘IO重负载应⽤，</span></span><br><span class="line">可设置为off，以平衡磁盘与⽹络IO处理速度，降低系统<span class="built_in">uptime</span>。</span><br><span class="line">    sendfile on;</span><br><span class="line">    <span class="comment">#开启⽬录列表访问，合适下载服务器，默认关闭。</span></span><br><span class="line">    autoindex on;</span><br><span class="line">    <span class="comment">#此选项允许或禁⽌使⽤socke的TCP_CORK的选项，此选项仅在使⽤sendfile的时候使⽤</span></span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    <span class="comment">#长连接超时时间，单位是秒</span></span><br><span class="line">    keepalive_timeout 120;</span><br><span class="line">    <span class="comment">#FastCGI相关参数是为了改善⽹站的性能：减少资源占⽤，提⾼访问速度。下⾯参数看字⾯意思都能理解。</span></span><br><span class="line">    fastcgi_connect_timeout 300;</span><br><span class="line">    fastcgi_send_timeout 300;</span><br><span class="line">    fastcgi_read_timeout 300;</span><br><span class="line">    fastcgi_buffer_size 64k;</span><br><span class="line">    fastcgi_buffers 4 64k;</span><br><span class="line">    fastcgi_busy_buffers_size 128k;</span><br><span class="line">    fastcgi_temp_file_write_size 128k;</span><br><span class="line">    <span class="comment">#gzip模块设置</span></span><br><span class="line">    gzip on; <span class="comment">#开启gzip压缩输出</span></span><br><span class="line">    gzip_min_length 1k;    <span class="comment">#最⼩压缩⽂件⼤⼩</span></span><br><span class="line">gzip_buffers 4 16k;    <span class="comment">#压缩缓冲区</span></span><br><span class="line">    gzip_http_version 1.0;    <span class="comment">#压缩版本（默认1.1，前端如果是squid2.5请使⽤1.0）</span></span><br><span class="line">    gzip_comp_level 2;    <span class="comment">#压缩等级</span></span><br><span class="line">    gzip_types text/plain application/x-javascript text/css application/xml;    <span class="comment">#压缩类型，默认就已经包含textml，所以下⾯就不⽤再写了，写上去也不会有问题</span></span><br><span class="line">，但是会有⼀个warn。</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    <span class="comment">#开启限制IP连接数的时候需要使⽤</span></span><br><span class="line">    <span class="comment">#limit_zone crawler $binary_remote_addr 10m;</span></span><br><span class="line">    <span class="comment">#负载均衡配置</span></span><br><span class="line">    upstream piao.jd.com &#123;</span><br><span class="line">        <span class="comment">#upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表⽰权值，权值越⾼被分配到的⼏率越⼤。</span></span><br><span class="line">        server 192.168.80.121:80 weight=3;</span><br><span class="line">        server 192.168.80.122:80 weight=2;</span><br><span class="line">        server 192.168.80.123:80 weight=3;</span><br><span class="line">        <span class="comment">#nginx的upstream⽬前⽀持4种⽅式的分配</span></span><br><span class="line">        <span class="comment">#1、轮询（默认）</span></span><br><span class="line">        <span class="comment">#每个请求按时间顺序逐⼀分配到不同的后端服务器，如果后端服务器down掉，能⾃动剔除。</span></span><br><span class="line">        <span class="comment">#2、weight</span></span><br><span class="line">        <span class="comment">#指定轮询⼏率，weight和访问⽐率成正⽐，⽤于后端服务器性能不均的情况。</span></span><br><span class="line">        <span class="comment">#例如：</span></span><br><span class="line">        <span class="comment">#upstream bakend &#123;</span></span><br><span class="line">        <span class="comment">#    server 192.168.0.14 weight=10;</span></span><br><span class="line">        <span class="comment">#    server 192.168.0.15 weight=10;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">        <span class="comment">#2、ip_hash</span></span><br><span class="line">        <span class="comment">#每个请求按访问ip的hash结果分配，这样每个访客固定访问⼀个后端服务器，可以解决session的问题。</span></span><br><span class="line">        <span class="comment">#例如：</span></span><br><span class="line">        <span class="comment">#upstream bakend &#123;</span></span><br><span class="line">        <span class="comment">#    ip_hash;</span></span><br><span class="line">        <span class="comment">#    server 192.168.0.14:88;</span></span><br><span class="line">        <span class="comment">#    server 192.168.0.15:80;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">        <span class="comment">#3、fair（第三⽅）</span></span><br><span class="line">        <span class="comment">#按后端服务器的响应时间来分配请求，响应时间短的优先分配。</span></span><br><span class="line">        <span class="comment">#upstream backend &#123;</span></span><br><span class="line">        <span class="comment">#    server server1;</span></span><br><span class="line">        <span class="comment">#    server server2;</span></span><br><span class="line">        <span class="comment">#    fair;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">        <span class="comment">#4、url_hash（第三⽅）</span></span><br><span class="line">        <span class="comment">#按访问url的hash结果来分配请求，使每个url定向到同⼀个后端服务器，后端服务器为缓存时⽐较有效。</span></span><br><span class="line">        <span class="comment">#例：在upstream中加⼊hash语句，server语句中不能写⼊weight等其他的参数，hash_method是使⽤的hash算法</span></span><br><span class="line">        <span class="comment">#upstream backend &#123;</span></span><br><span class="line">        <span class="comment">#    server squid1:3128;</span></span><br><span class="line">        <span class="comment">#    server squid2:3128;</span></span><br><span class="line">        <span class="comment">#    hash $request_uri;</span></span><br><span class="line">        <span class="comment">#    hash_method crc32;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">        <span class="comment">#tips:</span></span><br><span class="line">        <span class="comment">#upstream bakend&#123;#定义负载均衡设备的Ip及设备状态&#125;&#123;</span></span><br><span class="line">        <span class="comment">#    ip_hash;</span></span><br><span class="line">        <span class="comment">#    server 127.0.0.1:9090 down;</span></span><br><span class="line">        <span class="comment">#    server 127.0.0.1:8080 weight=2;</span></span><br><span class="line">        <span class="comment">#    server 127.0.0.1:6060;</span></span><br><span class="line">        <span class="comment">#    server 127.0.0.1:7070 backup;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">        <span class="comment">#在需要使⽤负载均衡的server中增加 proxy_pass http://bakend/;</span></span><br><span class="line">        <span class="comment">#每个设备的状态设置为:</span></span><br><span class="line">        <span class="comment">#1.down表⽰单前的server暂时不参与负载</span></span><br><span class="line">        <span class="comment">#2.weight为weight越⼤，负载的权重就越⼤。</span></span><br><span class="line">        <span class="comment">#3.max_fails：允许请求失败的次数默认为1.当超过最⼤次数时，返回proxy_next_upstream模块定义的错误</span></span><br><span class="line">        <span class="comment">#4.fail_timeout:max_fails次失败后，暂停的时间。</span></span><br><span class="line">        <span class="comment">#5.backup：其它所有的⾮backup机器down或者忙的时候，请求backup机器。所以这台机器压⼒会最轻。</span></span><br><span class="line">nginx⽀持同时设置多组的负载均衡，⽤来给不⽤的server来使⽤。</span><br><span class="line">        <span class="comment">#client_body_in_file_only设置为On 可以讲client post过来的数据记录到⽂件中⽤来做debug</span></span><br><span class="line">        <span class="comment">#client_body_temp_path设置记录⽂件的⽬录可以设置最多3层⽬录</span></span><br><span class="line">        <span class="comment">#location对URL进⾏匹配.可以进⾏重定向或者进⾏新的代理负载均衡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#虚拟主机的配置</span></span><br><span class="line">    server</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">#监听端⼝</span></span><br><span class="line">        listen 80;</span><br><span class="line">        <span class="comment">#域名可以有多个，⽤空格隔开</span></span><br><span class="line">        server_name www.jd.com jd.com;</span><br><span class="line">        index index.html index.htm index.php;</span><br><span class="line">        root /data/www/jd;</span><br><span class="line">        <span class="comment">#对******进⾏负载均衡</span></span><br><span class="line">        location ~ .*.(php|php5)?$</span><br><span class="line">        &#123;</span><br><span class="line">            fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">            fastcgi_index index.php;</span><br><span class="line">            include fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#图⽚缓存时间设置</span></span><br><span class="line">        location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 10d;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#JS和CSS缓存时间设置</span></span><br><span class="line">        location ~ .*.(js|css)?$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 1h;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#⽇志格式设定</span></span><br><span class="line">        <span class="comment">#$remote_addr与$http_x_forwarded_for⽤以记录客户端的ip地址；</span></span><br><span class="line">        <span class="comment">#$remote_user：⽤来记录客户端⽤户名称；</span></span><br><span class="line">        <span class="comment">#$time_local：⽤来记录访问时间与时区；</span></span><br><span class="line">        <span class="comment">#$request：⽤来记录请求的url与http协议；</span></span><br><span class="line">        <span class="comment">#$status：⽤来记录请求状态；成功是200，</span></span><br><span class="line">        <span class="comment">#$body_bytes_sent ：记录发送给客户端⽂件主体内容⼤⼩；</span></span><br><span class="line">        <span class="comment">#$http_referer：⽤来记录从那个页⾯链接访问过来的；</span></span><br><span class="line">        <span class="comment">#$http_user_agent：记录客户浏览器的相关信息；</span></span><br><span class="line">        <span class="comment">#通常web服务器放在反向代理的后⾯，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器</span></span><br><span class="line">在转发请求的http头信息中，可以增加x_forwarded_for信息，⽤以记录原有客户端的IP地址和原来客户端的请求的服务器地址。</span><br><span class="line">        log_format access <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">        <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">        <span class="string">&#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;</span>;</span><br><span class="line">        <span class="comment">#定义本虚拟主机的访问⽇志</span></span><br><span class="line">        access_log  /usr/local/nginx/logs/host.access.log  main;</span><br><span class="line">        access_log  /usr/local/nginx/logs/host.access.404.<span class="built_in">log</span>  log404;</span><br><span class="line">        <span class="comment">#对 &quot;/&quot; 启⽤反向代理</span></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://127.0.0.1:88;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="comment">#后端的Web服务器可以通过X-Forwarded-For获取⽤户真实IP</span></span><br><span class="line">            proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            <span class="comment">#以下是⼀些反向代理的配置，可选。</span></span><br><span class="line">proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">            <span class="comment">#允许客户端请求的最⼤单⽂件字节数</span></span><br><span class="line">            client_max_body_size 10m;</span><br><span class="line">            <span class="comment">#缓冲区代理缓冲⽤户端请求的最⼤字节数，</span></span><br><span class="line">            <span class="comment">#如果把它设置为⽐较⼤的数值，例如256k，那么，⽆论使⽤firefox还是IE浏览器，来提交任意⼩于256k的图⽚，都很正常。如果注释该指令，使⽤默</span></span><br><span class="line">认的client_body_buffer_size设置，也就是操作系统页⾯⼤⼩的两倍，8k或者16k，问题就出现了。</span><br><span class="line">            <span class="comment">#⽆论使⽤firefox4.0还是IE8.0，提交⼀个⽐较⼤，200k左右的图⽚，都返回500 Internal Server Error错误</span></span><br><span class="line">            client_body_buffer_size 128k;</span><br><span class="line">            <span class="comment">#表⽰使nginx阻⽌HTTP应答代码为400或者更⾼的应答。</span></span><br><span class="line">            proxy_intercept_errors on;</span><br><span class="line">            <span class="comment">#后端服务器连接的超时时间_发起握⼿等候响应超时时间</span></span><br><span class="line">            <span class="comment">#nginx跟后端服务器连接超时时间(代理连接超时)</span></span><br><span class="line">            proxy_connect_timeout 90;</span><br><span class="line">            <span class="comment">#后端服务器数据回传时间(代理发送超时)</span></span><br><span class="line">            <span class="comment">#后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据</span></span><br><span class="line">            proxy_send_timeout 90;</span><br><span class="line">            <span class="comment">#连接成功后，后端服务器响应时间(代理接收超时)</span></span><br><span class="line">            <span class="comment">#连接成功后_等候后端服务器响应时间_其实已经进⼊后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）</span></span><br><span class="line">            proxy_read_timeout 90;</span><br><span class="line">            <span class="comment">#设置代理服务器（nginx）保存⽤户头信息的缓冲区⼤⼩</span></span><br><span class="line">            <span class="comment">#设置从被代理服务器读取的第⼀部分应答的缓冲区⼤⼩，通常情况下这部分应答中包含⼀个⼩的应答头，默认情况下这个值的⼤⼩为指令proxy_buffer</span></span><br><span class="line">s中指定的⼀个缓冲区的⼤⼩，不过可以将其设置为更⼩</span><br><span class="line">            proxy_buffer_size 4k;</span><br><span class="line">            <span class="comment">#proxy_buffers缓冲区，⽹页平均在32k以下的设置</span></span><br><span class="line">            <span class="comment">#设置⽤于读取应答（来⾃被代理服务器）的缓冲区数⽬和⼤⼩，默认情况也为分页⼤⼩，根据操作系统的不同可能是4k或者8k</span></span><br><span class="line">            proxy_buffers 4 32k;</span><br><span class="line">            <span class="comment">#⾼负荷下缓冲⼤⼩（proxy_buffers*2）</span></span><br><span class="line">            proxy_busy_buffers_size 64k;</span><br><span class="line">            <span class="comment">#设置在写⼊proxy_temp_path时数据的⼤⼩，预防⼀个⼯作进程在传递⽂件时阻塞太长</span></span><br><span class="line">            <span class="comment">#设定缓存⽂件夹⼤⼩，⼤于这个值，将从upstream服务器传</span></span><br><span class="line">            proxy_temp_file_write_size 64k;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#设定查看Nginx状态的地址</span></span><br><span class="line">        location /NginxStatus &#123;</span><br><span class="line">            stub_status on;</span><br><span class="line">            access_log on;</span><br><span class="line">            auth_basic <span class="string">&quot;NginxStatus&quot;</span>;</span><br><span class="line">            auth_basic_user_file confpasswd;</span><br><span class="line">            <span class="comment">#htpasswd⽂件的内容可以⽤apache提供的htpasswd⼯具来产⽣。</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#本地动静分离反向代理配置</span></span><br><span class="line">        <span class="comment">#所有jsp的页⾯均交由tomcat或resin处理</span></span><br><span class="line">        location ~ .(jsp|jspx|<span class="keyword">do</span>)?$ &#123;</span><br><span class="line">            proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            proxy_pass http://127.0.0.1:8080;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#所有静态⽂件由nginx直接读取不经过tomcat或resin</span></span><br><span class="line">        location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|</span><br><span class="line">        pdf|xls|mp3|wma)$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 15d;</span><br><span class="line">&#125;</span><br><span class="line">        location ~ .*.(js|css)?$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 1h;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>上⾯的⼀些配置详解仅供参考学习</li><li>2 配置服务代理：<br>第⼀步：打开nginx.conf⽂件，修改配置⽂件<br>为了⽅便阅读，我把⼀些不⽤的配置给删除了<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#http结构下可以有多个server。请求进来确定使⽤哪⼀个 server由 server_name 确定</span></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    server &#123; <span class="comment">#第⼀个server</span></span><br><span class="line">        listen       81;<span class="comment">#nginx的监听端⼝为81</span></span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8001;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location ~ /PMS/ &#123;</span><br><span class="line">          proxy_pass  http://localhost:8080; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>配置过程的注意事项：</li><li>1 nginx启动等命令</li><li>配置好后，需要重新启动nginx（来到nginx.exe⽂件下打开cmd界⾯）：<br>关闭的命令：nginx.exe - s stop</li><li>启动命令：nginx.exe</li><li>重新加载配置命令：nginx.exe - s reload</li><li>2 location 详解</li><li>2.1 location介绍<br>location :⼀个server下可以有多个location ，⽤来匹配 同⼀个域名下不同uri的访问<br>root 表⽰本地的根⽬录 ,可以写相对路径 也可以写绝对路径如 e：/nginx/html ；<br>index :访问主页 后⾯如果跟有多个页⾯ 则会依次判断 如果第⼀个不存在 则向后匹配；<br>proxy_pass ：转发 后跟系统地址</li><li>2.2 location匹配原则<br>location表达式<br>syntax: location [=|~ | <del>* |^</del>|@] /uri/ { - }<br>分为两种匹配模式，普通字符串匹配，正则匹配<br>⽆开头引量字符或以=开头表⽰普通字符电匹配<br>以~ 或 ~ * 开头表⽰正则匹配，~ * 表⽰不区分⼤⼩写<br>多个locati on时匹配规则<br>总体是先普通后正则原则，只识别URI部分，例如请求为/test/1/abc . do?arg=xxx</li><li>先查找是否有=开头的精确匹配。即Location = /test/1/abc.do {…}</li><li>再查找普通匹配，以最⼤前缀为规则，如有以下两个location<br>location /test/ {…}<br>location /test/1/ {…}<br>则匹配后⼀项</li><li>匹配到⼀个普通格式后，搜索并未结束。⽽是暂存当前结果，并继续再搜索正则模式</li><li>在所有正则模式lacation中找到第⼀个匹配项后，以此四配项为最终结果<br>所以正则匹配项匹配规则受定义前后顺序影响。但普通匹配不会</li><li>如果未找到正则匹配项，则以3中缓存的结果为最终结果</li><li>如果⼀个匹配都没有，返回404<br>location =/ {…} 与location / {…} 的差别<br>前⼀个是精确匹配，只响应/请求，所有/xxx类请求不会以前缀匹配形式匹配到它<br>⽽后⼀个正相反，所有请求必然都是以/开头，所以没有其它匹配结果时⼀⼆定会执⾏到它<br>location A- 1 {…} A-意思是⾲正则。表⽰匹配到此模式后不再继线正则搜索<br>#所有如果这样配置，相当于关团了正则匹配功能<br>#因为⼀个请求在普通匹配规则下没得到其它普通匹配结果时，最終匹配到这⾥<br>⽽这个^-指令⼜相当于不允许正则，.机当于匹配到此为⽌/test/abc.jsp</li></ol><p>**特别强调⼀点<br>在配置 proxy_pass 记得在url不要加上斜杠/</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Web服务" scheme="https://drfengling.github.io/categories/Web%E6%9C%8D%E5%8A%A1/"/>
    
    
    <category term="Nginx" scheme="https://drfengling.github.io/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>C#WCF方向(三)</title>
    <link href="https://drfengling.github.io/qm/31480aad.html"/>
    <id>https://drfengling.github.io/qm/31480aad.html</id>
    <published>2022-05-06T06:27:39.000Z</published>
    <updated>2022-05-06T07:46:45.315Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><ul><li>序列化机制</li><li>数据契约</li><li>消息契约</li><li>Demo</li></ul><h3 id="序列化-Serialization"><a href="#序列化-Serialization" class="headerlink" title="序列化 Serialization"></a>序列化 Serialization</h3><p>A格式 转换 B格式</p><h3 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h3><h4 id="序列化器"><a href="#序列化器" class="headerlink" title="序列化器"></a>序列化器</h4><p>1.BinaryFormatter 二进制平台<br>2.SoapFormatter SOAP<br>3.XmlSerializer Xml强大的控制 类型有限<br>4.DataContractSerializer WCF优化<br>5.NetDataContractSerializer WCF二进制<br>6.DataContractJsonSerializer JSON</p><h4 id="WCF序列化过程"><a href="#WCF序列化过程" class="headerlink" title="WCF序列化过程"></a>WCF序列化过程</h4><p>参数对象 序列化 传输 反序列化 执行操作 返回结果 序列化 传输</p><h3 id="数据契约"><a href="#数据契约" class="headerlink" title="数据契约"></a>数据契约</h3><h3 id="消息契约"><a href="#消息契约" class="headerlink" title="消息契约"></a>消息契约</h3><ul><li>允许完全控制消息体</li><li>SOAP消息头 Header</li><li>SOAP消息体 Body<h4 id="消息契约示例"><a href="#消息契约示例" class="headerlink" title="消息契约示例"></a>消息契约示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class MyMessage&#123;</span><br><span class="line">[MessageHeader]</span><br><span class="line">public string Operation;</span><br><span class="line">[MessageHeader]</span><br><span class="line">public string Name;</span><br><span class="line">[MessageBodyMember]</span><br><span class="line">public int Age;</span><br><span class="line">[MessageBodyMember]</span><br><span class="line">public string Home;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="WCF序列化器-支持的数据类型"><a href="#WCF序列化器-支持的数据类型" class="headerlink" title="WCF序列化器 支持的数据类型"></a>WCF序列化器 支持的数据类型</h4></li><li>无参构造函数的Pulbic类</li><li>数据契约类</li><li>集合类:Ienumerable,IDictionary,CollectionDataContract</li><li>枚举类</li><li>.NET基元类: Byte,Sbyte,Int16,Int32等</li><li>SerializableAttribute 属性标记的类型</li><li>原始XML类型和ADO.NET关系数据的类型</li></ul><h4 id="WCF使用XmlSerializer"><a href="#WCF使用XmlSerializer" class="headerlink" title="WCF使用XmlSerializer"></a>WCF使用XmlSerializer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ServiceContract]</span><br><span class="line">[XmlSerializerFormat]</span><br><span class="line">public interface MyService&#123;</span><br><span class="line">[OperationContract]</span><br><span class="line">[XmlSerializerFormat]</span><br><span class="line">void MyMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="C-使用XmlSerializer"><a href="#C-使用XmlSerializer" class="headerlink" title="C#使用XmlSerializer"></a>C#使用XmlSerializer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">XmlSerializer serializer=new XmlSerializer(typeof(Order));</span><br><span class="line">TextWriter writer=new StreamWriter(filename);</span><br><span class="line">Order order=new Order();</span><br><span class="line">serializer.Serialize(writer,po);</span><br><span class="line">writer.Close();</span><br></pre></td></tr></table></figure><h4 id="C-中使用DataContractSerializer"><a href="#C-中使用DataContractSerializer" class="headerlink" title="C#中使用DataContractSerializer"></a>C#中使用DataContractSerializer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FileStream writer=new FileStream(filename,FileMode.Create);</span><br><span class="line">DataContractSerializer ser=new DataContractSerializer(typeof(Person));</span><br><span class="line">ser.WriteObject(writer,pl);</span><br><span class="line">writer.Close();</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="C#" scheme="https://drfengling.github.io/categories/C/"/>
    
    
    <category term="WCF" scheme="https://drfengling.github.io/tags/WCF/"/>
    
  </entry>
  
  <entry>
    <title>C#WCF方向(二)</title>
    <link href="https://drfengling.github.io/qm/4fbb2a86.html"/>
    <id>https://drfengling.github.io/qm/4fbb2a86.html</id>
    <published>2022-05-04T01:24:05.000Z</published>
    <updated>2022-05-06T02:08:58.851Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>1.终结点 Endpoint<br>2.契约 Contract<br>3.宿主 Host<br>4.绑定 Binding<br>5.Demo:定义契约,终结点,配置绑定</p><span id="more"></span><h3 id="必备知识"><a href="#必备知识" class="headerlink" title="必备知识"></a>必备知识</h3><p>1.了解.Net Framework<br>2.了解Asp.net应用程序开发<br>3.熟悉Visual Studio</p><h3 id="可选知识"><a href="#可选知识" class="headerlink" title="可选知识"></a>可选知识</h3><p>1.Enterprise Services(COM+)<br>2..Net Remoting<br>3.Asp.Net web Service(ASMX)</p><h3 id="终结点-EndPoint"><a href="#终结点-EndPoint" class="headerlink" title="终结点 EndPoint"></a>终结点 EndPoint</h3><p>1.2种类型 终结点</p><ul><li>元数据终结点 </li><li>普通终结点</li></ul><h3 id="地址-Address"><a href="#地址-Address" class="headerlink" title="地址 Address"></a>地址 Address</h3><ul><li>相对地址</li><li>绝对地址</li><li>基地址 BaseAddress 基础地址 (下面<a href="http://localhost:6054/">http://localhost:6054</a>就是基地址)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;endpoint address=<span class="string">&quot;http://localhost:6054/ServiceDemo.svc&quot;</span></span><br><span class="line"> binding=<span class="string">&quot;basicHttpBinding&quot;</span> bindingConfiguration=<span class="string">&quot;BasicHttpBinding_IServiceDemo&quot;</span></span><br><span class="line"> contract=<span class="string">&quot;ServiceReferenceDemo.IServiceDemo&quot;</span> name=<span class="string">&quot;BasicHttpBinding_IServiceDemo&quot;</span>/&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="绑定-Binding"><a href="#绑定-Binding" class="headerlink" title="绑定 Binding"></a>绑定 Binding</h3><ul><li>绑定是特殊配置元素(称作“绑定元素”)的集合,服务运行库在每次构造客户端或服务终结点时都对这些元素进行评估</li><li>WCF里的传输协议,安全,事务,消息编码,超时等等都是由绑定来控制</li><li>控制WCF的一个接口<h4 id="绑定列表"><a href="#绑定列表" class="headerlink" title="绑定列表"></a>绑定列表</h4><img src="/qm/4fbb2a86/1.jpg"></li></ul><h4 id="Windows-Azure-AppFabric绑定"><a href="#Windows-Azure-AppFabric绑定" class="headerlink" title="Windows Azure AppFabric绑定"></a>Windows Azure AppFabric绑定</h4><ul><li>NetTcpRelayBinding 消息中途转发机制</li><li>NetOneWayRelayBinding 消息单向转发</li><li>NetEventRelayBinding 基于事件的</li><li>webHttpRelayBinding </li><li>WS2007HttpRelayBinding</li></ul><h4 id="WCF绑定和通道堆栈"><a href="#WCF绑定和通道堆栈" class="headerlink" title="WCF绑定和通道堆栈"></a>WCF绑定和通道堆栈</h4><p><img src="/qm/4fbb2a86/5.png"></p><h4 id="绑定的结构"><a href="#绑定的结构" class="headerlink" title="绑定的结构"></a>绑定的结构</h4><p><img src="/qm/4fbb2a86/6.png"></p><h4 id="绑定结构例子"><a href="#绑定结构例子" class="headerlink" title="绑定结构例子"></a>绑定结构例子</h4><p><img src="/qm/4fbb2a86/7.png"></p><h3 id="契约-Contract"><a href="#契约-Contract" class="headerlink" title="契约 Contract"></a>契约 Contract</h3><p>契约是通信参与方之间的约定</p><ul><li>数据契约 DataContract 实体类</li><li>操作契约 Operation Contract 服务方法</li><li>服务契约 Service Contract 服务</li><li>消息契约 Message Contract 对消息体的完整控制</li><li>错误契约 Fault Contract 把错误信息包装起来返回给客户端</li></ul><h4 id="数据契约"><a href="#数据契约" class="headerlink" title="数据契约"></a>数据契约</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[DataContract]//数据契约属性声明</span><br><span class="line">    public class UserData</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        [DataMember]//数据成员标记</span><br><span class="line">        public string Name&#123;<span class="built_in">set</span>;get;&#125;;</span><br><span class="line"></span><br><span class="line">        [DataMember(Name=<span class="string">&quot;UserEmail&quot;</span>)]//支持别名定义</span><br><span class="line">        public string Email&#123;<span class="built_in">set</span>;get;&#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h4><p>1.XmlSerialzer<br>2.DataContractSerializer<br>3.NetDataContractSerializer NetTcp使用的<br>4.DataContractJsonSerializer json数据序列化</p><h4 id="服务契约"><a href="#服务契约" class="headerlink" title="服务契约"></a>服务契约</h4><p>ServiceContract<br>定义约定的服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[ServiceContract]//服务契约</span><br><span class="line">    public interface IServiceDemo</span><br><span class="line">    &#123;</span><br><span class="line">        [OperationContract]//操作契约</span><br><span class="line">        string GetData(int value);</span><br><span class="line"></span><br><span class="line">        [OperationContract]</span><br><span class="line">        UserData GetDataUsingDataContract(UserData user);</span><br><span class="line"></span><br><span class="line">        // TODO: Add your service operations here</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="操作契约"><a href="#操作契约" class="headerlink" title="操作契约"></a>操作契约</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[OperationContract]//操作契约</span><br><span class="line">        string GetData(int value);</span><br></pre></td></tr></table></figure><h4 id="消息契约-MessageContract"><a href="#消息契约-MessageContract" class="headerlink" title="消息契约 MessageContract"></a>消息契约 MessageContract</h4><p>1.允许完全控制消息体<br>2.SOAP消息头 header<br>3.SOAP 消息体 Body</p><h4 id="错误契约-FaultContract"><a href="#错误契约-FaultContract" class="headerlink" title="错误契约 FaultContract"></a>错误契约 FaultContract</h4><p>1.为了在客户端和服务端共享错误信息<br>2.错误处理</p><h3 id="宿主Host"><a href="#宿主Host" class="headerlink" title="宿主Host"></a>宿主Host</h3><p>IIS.EXE.WinForm.Wpf.WindowService.NT Service.COM+</p><h4 id="托管进程"><a href="#托管进程" class="headerlink" title="托管进程"></a>托管进程</h4><p><img src="/qm/4fbb2a86/2.png"></p><h4 id="怎么托管WCF服务"><a href="#怎么托管WCF服务" class="headerlink" title="怎么托管WCF服务"></a>怎么托管WCF服务</h4><p><img src="/qm/4fbb2a86/3.png"></p><h4 id="Window-Server-AppFabric"><a href="#Window-Server-AppFabric" class="headerlink" title="Window Server AppFabric"></a>Window Server AppFabric</h4><p><img src="/qm/4fbb2a86/4.png"></p><h3 id="WCF绑定学习资源"><a href="#WCF绑定学习资源" class="headerlink" title="WCF绑定学习资源"></a>WCF绑定学习资源</h3><ul><li>书籍<ul><li>Inside WCF,(Justin Smith) 《WCF技术内幕》</li><li>第8章 绑定</li></ul></li><li>文章<ul><li>Aaron Skonnard 深入学习WCF绑定</li></ul></li></ul><h3 id="WCF服务配置管理工具"><a href="#WCF服务配置管理工具" class="headerlink" title="WCF服务配置管理工具"></a>WCF服务配置管理工具</h3><p>点击Visual Studio导航栏 工具 WCF配置编辑器<br>打开配置文件app.config<br><img src="/qm/4fbb2a86/9.png"></p><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><ul><li>定义契约</li><li>配置终结点</li><li>使用绑定<h4 id="定义契约"><a href="#定义契约" class="headerlink" title="定义契约"></a>定义契约</h4></li></ul><p>1.打开Visual Studio,创建新项目,我们搜索wcf,选择wcf服务库,<br><img src="/qm/4fbb2a86/10.png"><br>2.自定义项目名称路径创建即可(后面不再图文赘述)<br><img src="/qm/4fbb2a86/11.png"><br>3.这里做简单更改</p><ul><li>IService1<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 注意: 使用“重构”菜单上的“重命名”命令，可以同时更改代码和配置文件中的接口名“IService1”。</span><br><span class="line">   [ServiceContract]</span><br><span class="line">   public interface IService1</span><br><span class="line">   &#123;</span><br><span class="line">       [OperationContract]</span><br><span class="line">       string SayHello(string Name);</span><br><span class="line">       [OperationContract]</span><br><span class="line">       string SayHellotoUser(User user);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   // 使用下面示例中说明的数据约定将复合类型添加到服务操作。</span><br><span class="line">   // 可以将 XSD 文件添加到项目中。在生成项目后，可以通过命名空间“WcfService.ContractType”直接使用其中定义的数据类型。</span><br><span class="line">   [DataContract]</span><br><span class="line">   public class User</span><br><span class="line">   &#123;</span><br><span class="line">       [DataMember]</span><br><span class="line">       public string FirstName &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">       [DataMember]</span><br><span class="line">       public string SecondName &#123; <span class="built_in">set</span>; get; &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li>Service1<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Service1 : IService1</span><br><span class="line">    &#123;</span><br><span class="line">        public string SayHello(string Name)</span><br><span class="line">        &#123;</span><br><span class="line">            string result = $<span class="string">&quot;Hello,&#123;Name&#125;&quot;</span>;</span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">            <span class="built_in">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public string SayHellotoUser(User user)</span><br><span class="line">        &#123;</span><br><span class="line">            string result = $<span class="string">&quot;Hello,&#123;user.FirstName&#125;&#123;user.SecondName&#125;&quot;</span>;</span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">            <span class="built_in">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="配置终结点"><a href="#配置终结点" class="headerlink" title="配置终结点"></a>配置终结点</h4></li></ul><p>1.右键解决方案添加<br>2.新建项目 搜索控制台 选择控制台应用程序创建WcfHost<br><img src="/qm/4fbb2a86/13.png"><br>3.添加对定义契约的Wcf服务类库的引用,我们打开Program.cs文件创建打开服务.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">using (ServiceHost host=new ServiceHost(typeof(WcfService.Service1)))</span><br><span class="line">            &#123;</span><br><span class="line">                host.Open();</span><br><span class="line">                Console.WriteLine($<span class="string">&quot;Host is Running,and State is &#123;host.State&#125;&quot;</span>);</span><br><span class="line">                Console.ReadLine();</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><p>4.打开app.config 配置终结点 这里配置了4个终结点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;system.web&gt;</span><br><span class="line">    &lt;compilation debug=<span class="string">&quot;true&quot;</span> /&gt;</span><br><span class="line">  &lt;/system.web&gt;</span><br><span class="line">  &lt;!-- 部署服务库项目时，必须将配置文件的内容添加到</span><br><span class="line"> 主机的 app.config 文件中。System.Configuration 不支持库的配置文件。 --&gt;</span><br><span class="line">  &lt;system.serviceModel&gt;</span><br><span class="line">    &lt;services&gt;</span><br><span class="line">      &lt;service name=<span class="string">&quot;WcfService.Service1&quot;</span>&gt;</span><br><span class="line">        &lt;host&gt;</span><br><span class="line">          &lt;baseAddresses&gt;</span><br><span class="line">  &lt;add baseAddress=<span class="string">&quot;http://localhost:8001&quot;</span>/&gt;</span><br><span class="line">  &lt;add baseAddress=<span class="string">&quot;net.tcp://localhost:8002&quot;</span>/&gt;</span><br><span class="line">            &lt;!--&lt;add baseAddress = <span class="string">&quot;http://localhost:8733/Design_Time_Addresses/WcfService/Service1/&quot;</span> /&gt;--&gt;</span><br><span class="line">          &lt;/baseAddresses&gt;</span><br><span class="line">        &lt;/host&gt;</span><br><span class="line">        &lt;!-- Service Endpoints --&gt;</span><br><span class="line">        &lt;!-- 除非完全限定，否则地址相对于上面提供的基址--&gt;</span><br><span class="line">  &lt;endpoint address=<span class="string">&quot;http://localhost:8001/WcfService&quot;</span> binding=<span class="string">&quot;wsHttpBinding&quot;</span> name=<span class="string">&quot;httpEndpoint&quot;</span> contract=<span class="string">&quot;WcfService.IService1&quot;</span>&gt;</span><br><span class="line">  &lt;/endpoint&gt;</span><br><span class="line">  &lt;endpoint address=<span class="string">&quot;net.tcp://localhost:8002/WcfService&quot;</span> binding=<span class="string">&quot;netTcpBinding&quot;</span> name=<span class="string">&quot;tcpEndpoint&quot;</span> contract=<span class="string">&quot;WcfService.IService1&quot;</span>&gt;</span><br><span class="line">  &lt;/endpoint&gt; </span><br><span class="line">        &lt;!-- Metadata Endpoints --&gt;</span><br><span class="line">        &lt;!-- 元数据交换终结点供相应的服务用于向客户端做自我介绍。 --&gt; </span><br><span class="line">        &lt;!-- 此终结点不使用安全绑定，应在部署前确保其安全或将其删除--&gt;</span><br><span class="line">  &lt;endpoint address=<span class="string">&quot;mex&quot;</span> binding=<span class="string">&quot;mexHttpBinding&quot;</span> contract=<span class="string">&quot;IMetadataExchange&quot;</span> name=<span class="string">&quot;httpMex&quot;</span>/&gt;</span><br><span class="line">  &lt;endpoint address=<span class="string">&quot;mex&quot;</span> binding=<span class="string">&quot;mexTcpBinding&quot;</span> contract=<span class="string">&quot;IMetadataExchange&quot;</span> name=<span class="string">&quot;tcpMex&quot;</span>/&gt;</span><br><span class="line">      &lt;/service&gt;</span><br><span class="line">    &lt;/services&gt;</span><br><span class="line">    &lt;behaviors&gt;</span><br><span class="line">      &lt;serviceBehaviors&gt;</span><br><span class="line">        &lt;behavior&gt;</span><br><span class="line">          &lt;!-- 为避免泄漏元数据信息，</span><br><span class="line">          请在部署前将以下值设置为 <span class="literal">false</span> --&gt;</span><br><span class="line">          &lt;serviceMetadata httpGetEnabled=<span class="string">&quot;True&quot;</span> httpsGetEnabled=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">          &lt;!-- 要接收故障异常详细信息以进行调试，</span><br><span class="line">          请将以下值设置为 <span class="literal">true</span>。在部署前设置为 <span class="literal">false</span> </span><br><span class="line">          以避免泄漏异常信息 --&gt;</span><br><span class="line">          &lt;serviceDebug includeExceptionDetailInFaults=<span class="string">&quot;False&quot;</span> /&gt;</span><br><span class="line">        &lt;/behavior&gt;</span><br><span class="line">      &lt;/serviceBehaviors&gt;</span><br><span class="line">    &lt;/behaviors&gt;</span><br><span class="line">  &lt;/system.serviceModel&gt;</span><br></pre></td></tr></table></figure><p>5.点击导航栏生成重新生成解决方案,设置WcfHost为启动项目<br>启动项目<br><img src="/qm/4fbb2a86/14.png"><br>6.我们关闭Visual Studio,找到Visual Studio右键以管理员权限运行,重新打开项目并启动.完成!<br><img src="/qm/4fbb2a86/15.png"><br>基于控制台的Wcf服务搭建完成,我们新建一个客户端来测试服务.</p><h4 id="使用绑定"><a href="#使用绑定" class="headerlink" title="使用绑定"></a>使用绑定</h4><p>1.右键解决方案,添加 新建项目 新建控制台应用程序WcfClient<br>2.点击引用, 点击发现或手动输入添加服务引用<br><img src="/qm/4fbb2a86/16.png"><br>3.打开Program.cs测试服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Service1Client client1 = new Service1Client(<span class="string">&quot;httpEndpoint&quot;</span>);</span><br><span class="line">            Console.WriteLine(client1.SayHello(<span class="string">&quot;浅梦风凌&quot;</span>));</span><br><span class="line">            User user1 = new User();</span><br><span class="line">            user1.FirstName = <span class="string">&quot;浅梦&quot;</span>;</span><br><span class="line">            user1.SecondName = <span class="string">&quot;风凌&quot;</span>;</span><br><span class="line">            Console.WriteLine(client1.SayHellotoUser(user1));</span><br><span class="line">            Console.Read();</span><br></pre></td></tr></table></figure><p>4.导航栏生成重新生成解决方案,启动<br>1.启动前右键解决方案,点击属性,配置多个启动项目<br><img src="/qm/4fbb2a86/17.png"><br>2.启动<br><img src="/qm/4fbb2a86/18.png"><br>好了,可以看到服务调用结果了.完成!我们的Wcf从创建服务到配置绑定到测试已经全部完成了。</p><h4 id="对tcp终结点的调用如下"><a href="#对tcp终结点的调用如下" class="headerlink" title="对tcp终结点的调用如下"></a>对tcp终结点的调用如下</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Service1Client client2 = new Service1Client(<span class="string">&quot;tcpEndpoint&quot;</span>);</span><br><span class="line">            Console.WriteLine(client2.SayHello(<span class="string">&quot;小猫&quot;</span>));</span><br><span class="line">            User user2 = new User();</span><br><span class="line">            user2.FirstName = <span class="string">&quot;海边的&quot;</span>;</span><br><span class="line">            user2.SecondName = <span class="string">&quot;海边&quot;</span>;</span><br><span class="line">            Console.WriteLine(client1.SayHellotoUser(user2));</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;主题&quot;&gt;&lt;a href=&quot;#主题&quot; class=&quot;headerlink&quot; title=&quot;主题&quot;&gt;&lt;/a&gt;主题&lt;/h3&gt;&lt;p&gt;1.终结点 Endpoint&lt;br&gt;2.契约 Contract&lt;br&gt;3.宿主 Host&lt;br&gt;4.绑定 Binding&lt;br&gt;5.Demo:定义契约,终结点,配置绑定&lt;/p&gt;</summary>
    
    
    
    <category term="C#" scheme="https://drfengling.github.io/categories/C/"/>
    
    
    <category term="WCF" scheme="https://drfengling.github.io/tags/WCF/"/>
    
  </entry>
  
  <entry>
    <title>C#WCF方向(一)</title>
    <link href="https://drfengling.github.io/qm/e08ab1e4.html"/>
    <id>https://drfengling.github.io/qm/e08ab1e4.html</id>
    <published>2022-05-03T05:55:35.000Z</published>
    <updated>2022-05-04T01:40:47.529Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="WCF"><a href="#WCF" class="headerlink" title="WCF"></a>WCF</h2><p>开始入手WCF了,从零开始,记录一下WCF的学习笔记</p><h3 id="什么是WCF"><a href="#什么是WCF" class="headerlink" title="什么是WCF"></a>什么是WCF</h3><p>摘要<br>WCF是使用托管代码建立和运行面向服务（Service Oriented）应用程序的统一框架。它使得开发者能够建立一个跨平台的安全、可信赖、事务性的解决方案，且能与已有系统兼容协作。WCF是微软分布式应用程序开发的集大成者，它整合了.Net平台下所有的和分布式系统有关的技术，例如.Net Remoting、ASMX、WSE和MSMQ。以通信(Communiation)范围而论，它可以跨进程、跨机器、跨子网、企业网乃至于 Internet；以宿主程序而论，可以以ASP.NET，EXE，WPF，Windows Forms，NT Service，COM+作为宿主(Host)。</p><span id="more"></span><p>简述<br>1.WCF全称Windows Communication Foundation<br>2.是Miscrosoft为构建面向服务的应用提供的分布式通信编程框架<br>3.是.Net Framework的重要组成部分.<br>4.WCF4.0<br>历史<br>ASMX WSE WCF3.0 WCF3.5 WCF4.0 WCFN.0</p><h3 id="集成微软分布式技术"><a href="#集成微软分布式技术" class="headerlink" title="集成微软分布式技术"></a>集成微软分布式技术</h3><p>WCF:WSE. MSMQ.  Enterprise Service COM+ .NET Remoting ASP.NET Web Service</p><h3 id="托管方式多样化"><a href="#托管方式多样化" class="headerlink" title="托管方式多样化"></a>托管方式多样化</h3><p>托管(Host)<br>IIS EXE Winform wpf Window Service  NT Service COM+</p><h3 id="统一编程模型"><a href="#统一编程模型" class="headerlink" title="统一编程模型"></a>统一编程模型</h3><p>Client Talk to  (Binding,Address,Contract)<br>1.Address: 每一个WCF的Service都有一个唯一的地址。这个地址给出了Service的地址和传输协议(Transport Protocol)。<br>2.Binding:绑定制定了服务通过什么形式访问。只要类比传输协议, encoding (text, binary, etc) 以及 WS-* 协议，像transactional支持以及可信任的消息队列。<br>3.Contract:Contract描述了Service能提供的各种服务。Contract有四种，包括Service Contract, Data Contract, Fault Contract和Message Contract。</p><h3 id="WCF知识点"><a href="#WCF知识点" class="headerlink" title="WCF知识点"></a>WCF知识点</h3><p>1.契约 Contract<br>2.宿主 Host<br>3.绑定 Binding<br>4.事务 Transaction<br>5.消息队列 MSMQ<br>6.并发控制 Concurrency Control<br>7.错误处理 Error Handling<br>8.安全 Security<br>9.诊断与调试</p><h3 id="软件工程的发展历史"><a href="#软件工程的发展历史" class="headerlink" title="软件工程的发展历史"></a>软件工程的发展历史</h3><p>面向过程PO 面向对象OO 面向组件CO 面向服务SO</p><h3 id="SOA的特征"><a href="#SOA的特征" class="headerlink" title="SOA的特征"></a>SOA的特征</h3><p>1.Service Oriented Architecture<br>2.面向服务的架构<br>互操作 重用 松耦合</p><h3 id="Web服务类别"><a href="#Web服务类别" class="headerlink" title="Web服务类别"></a>Web服务类别</h3><p>SOAP REST<br>soap:简单对象访问协议<br>rest：轻量级WebApi服务</p><h3 id="Web服务使用的领域"><a href="#Web服务使用的领域" class="headerlink" title="Web服务使用的领域"></a>Web服务使用的领域</h3><p>开发中间产品 暴露接口服务 集成第三方系统</p><h3 id="应用系统中的Web服务"><a href="#应用系统中的Web服务" class="headerlink" title="应用系统中的Web服务"></a>应用系统中的Web服务</h3><p>表现层<br>服务层<br>业务逻辑层——&gt;  ESB企业服务总线   ——&gt;服务<br>数据访问层<br>数据 数据</p><h3 id="系统集成中的Web服务"><a href="#系统集成中的Web服务" class="headerlink" title="系统集成中的Web服务"></a>系统集成中的Web服务</h3><p>   电子商务网站订单系统<br>    |              |                |<br>银行服务 库存系统服务 短信服务</p><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>1.创建一个WCF服务程序 程序并调用<br>打开Visual Studio开发工具 我这里用的2022<br>左上角菜单 文件 点击新建 选择项目 打开了创建新项目的对话框 我们在搜索栏搜素wcf<br>搜索结果如下所示:<br><img src="/qm/e08ab1e4/1.jpg"><br>这里选择WCF服务应用程序<br><img src="/qm/e08ab1e4/2.jpg"><br>自定义下项目名 位置 这里选用.Net4.5.2框架 创建即可<br><img src="/qm/e08ab1e4/3.jpg"><br>创建完成后 默认会添加IService1.cs,Service1.svc文件,.svc扩展文件,它会做一些消息的路由工作,激活服务,会通过文件做一些处理.<br>IService1.cs<br>ServiceContract:服务契约<br>包含两个操作契约OperationContract：GetData,GetDataUsingDataContract 使用数据契约获取数据<br>DataContract:数据契约:<br>包含两个值 bool  StringValue<br>做下自定义更改<br>1.增加数据契约对象<br>我们在IService1.cs中创建一个类自定义命名我的如下新增一个用户数据对象,增加以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[DataContract]//数据契约对象</span><br><span class="line">    public class UserData &#123; </span><br><span class="line">        [DataMember]</span><br><span class="line">        public string UserName &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">        [DataMember]</span><br><span class="line">        public string Email &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>2.增加服务契约接口<br>我们在IService1.cs中interface IService1中新增接口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// TODO: 在此添加您的服务操作</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 自定义服务契约</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;user&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">        [OperationContract]///注意:增加操作契约标记</span><br><span class="line">        UserData GetUserData(UserData user);</span><br></pre></td></tr></table></figure><p>3.在Service1.svc中新增实现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">///新增实现</span><br><span class="line">       public UserData GetUserData(UserData user) &#123;</span><br><span class="line">           <span class="built_in">return</span> user;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>到此，我们已完成了简单的数据服务实现契约,点击导航栏生成——&gt;重新生成解决方案,确认无报错后执行下一步<br>4.在浏览器中查看<br>点击Service1.svc右键选择在浏览器中查看<br>visual Studio打开浏览器,跳转服务界面.<br><img src="/qm/e08ab1e4/4.jpg"><br>出现这个界面,说明你的服务是正常的.可以发布了.我们看到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svcutil.exe http://localhost:60217/Service1.svc?wsdl</span><br></pre></td></tr></table></figure><p>wsdl:服务描述语言,对外公布的服务语言,你想让别人引用你的服务的话,就可以引用这个.<br>我们可以看到下方有客户端调用示例.后面客户端调用服务可以仿照使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">C<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">class Test</span><br><span class="line">&#123;</span><br><span class="line">    static void <span class="function"><span class="title">Main</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Service1Client client = new Service1Client();</span><br><span class="line"></span><br><span class="line">        // 使用 <span class="string">&quot;client&quot;</span> 变量在服务上调用操作。</span><br><span class="line"></span><br><span class="line">        // 始终关闭客户端。</span><br><span class="line">        client.Close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Visual Basic</span><br><span class="line"></span><br><span class="line">Class Test</span><br><span class="line">    Shared Sub Main()</span><br><span class="line">        Dim client As Service1Client = New Service1Client()</span><br><span class="line">        <span class="string">&#x27; 使用 &quot;client&quot; 变量在服务上调用操作。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#x27;</span> 始终关闭客户端。</span><br><span class="line">        client.Close()</span><br><span class="line">    End Sub</span><br><span class="line">End Class</span><br></pre></td></tr></table></figure><p>5.新增WPF项目<br>我们在解决方案下新增一个WPF项目<br>(也可以新增一个网站项目,Winform项目等)<br><img src="/qm/e08ab1e4/5.jpg"><br>自定义名字WCFClient创建.<br>6.引用服务<br>在创建好的wpf项目中选择引用,右键选择添加服务引用,打开如下:<br><img src="/qm/e08ab1e4/6.jpg"><br>我们输入步骤4在浏览器打开后生成的公共服务语言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:60217/Service1.svc?wsdl</span><br></pre></td></tr></table></figure><p>自定义命名空间名称ServiceReference确定.<br>提示:我们也可以点击发现.发现解决方案中的服务.<br>服务栏会为我们找到对应服务.<br><img src="/qm/e08ab1e4/7.jpg"><br>点击Service1.svc打开到IService1,即可查看右侧列表显示的三个服务接口,两个默认的服务接口契约,<br>和一个我们新增的GetUserData服务契约.(如果没有显示新增的接口,请返回WCF项目检查是否遗漏契约标记)<br>点击添加后的服务引用可以查看<br><img src="/qm/e08ab1e4/8.jpg"><br>7.使用Wpf调用服务</p><ul><li>打开MainWindow新增Button按钮,可以打开工具栏拖动Button到界面上,或编写Xaml文本增加,完成后调整布局.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            Width=<span class="string">&quot;100&quot;</span></span><br><span class="line">            Height=<span class="string">&quot;30&quot;</span></span><br><span class="line">            Content=<span class="string">&quot;调用服务&quot;</span> Click=<span class="string">&quot;Button_Click&quot;</span>/&gt;</span><br><span class="line">    &lt;/Grid&gt;</span><br></pre></td></tr></table></figure></li><li>点击Click事件F12进入后置代码,这里不做复杂框架处理,后置编写点击实现Wcf服务调用<br>具体实现如下:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">        /// 调用WCF服务.</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void Button_Click(object sender, RoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            Service1Client client = new Service1Client();</span><br><span class="line">            string result1 = client.GetData(1);</span><br><span class="line">            UserData userData = client.GetUserData(new <span class="function"><span class="title">UserData</span></span>() &#123; Email=<span class="string">&quot;Drfengling@163.com&quot;</span>,UserName=<span class="string">&quot;浅梦风凌&quot;</span>&#125;);</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li></ul><p>8.生成调试服务</p><ul><li>点击导航栏生成 重新生成解决方案 确认无误后在点击事件处打断点调试</li><li>选择WCFClient为启动项目,点击导航栏调试开始调试,点击按钮调用服务,观察服务调用结果<br><img src="/qm/e08ab1e4/9.jpg"><br>可以看到我们在客户端完成了对服务端的调用,调用获取到了WCF服务结果.<br>快来动手试试搭建简单的服务调用吧.</li></ul><h3 id="WCF的新特性"><a href="#WCF的新特性" class="headerlink" title="WCF的新特性"></a>WCF的新特性</h3><p>WCF4.5新特性<br>1.支持契约优先(Contract First)的开发<br>2.Building发现配置错误<br>3.支持新异步流<br>4.?singleWSDL<br>5.Websockets支持在端口80和443<br>6.XML编辑器工具展示<br>7.ChannelFactory缓存支持<br>8.二进制编码器压缩支持<br>9.不管Fire and foget的UDP消息发交换模式<br>10.支持单个WCF终结点支持多个身份验证模式<br>11.支持WCF服务使用国际化域名（IDNs）</p><h3 id="WCF学习资源"><a href="#WCF学习资源" class="headerlink" title="WCF学习资源"></a>WCF学习资源</h3><p>1.最权威WCF书籍</p><ul><li>Programing WCF Service,(Juval Lowy)</li><li>《WCF服务编程》第三版</li><li>Inside WCF,(Justin Smith)</li><li>《WCF技术内幕》</li></ul><p>2.论坛</p><ul><li>微软WCF中文技术论坛<br><a href="http://social.msdn.microsoft.com/Forums/zh-CN/wcfzhchs/threads">http://social.msdn.microsoft.com/Forums/zh-CN/wcfzhchs/threads</a></li><li>微软WCF英文技术论坛</li><li>跟我一起从零开始学WCF系列课程(由于官网视频已经失效了,有兴趣可以看看这篇博客)<br><a href="https://www.cnblogs.com/dqj1024/archive/2012/07/21/2602342.html">https://www.cnblogs.com/dqj1024/archive/2012/07/21/2602342.html</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;WCF&quot;&gt;&lt;a href=&quot;#WCF&quot; class=&quot;headerlink&quot; title=&quot;WCF&quot;&gt;&lt;/a&gt;WCF&lt;/h2&gt;&lt;p&gt;开始入手WCF了,从零开始,记录一下WCF的学习笔记&lt;/p&gt;
&lt;h3 id=&quot;什么是WCF&quot;&gt;&lt;a href=&quot;#什么是WCF&quot; class=&quot;headerlink&quot; title=&quot;什么是WCF&quot;&gt;&lt;/a&gt;什么是WCF&lt;/h3&gt;&lt;p&gt;摘要&lt;br&gt;WCF是使用托管代码建立和运行面向服务（Service Oriented）应用程序的统一框架。它使得开发者能够建立一个跨平台的安全、可信赖、事务性的解决方案，且能与已有系统兼容协作。WCF是微软分布式应用程序开发的集大成者，它整合了.Net平台下所有的和分布式系统有关的技术，例如.Net Remoting、ASMX、WSE和MSMQ。以通信(Communiation)范围而论，它可以跨进程、跨机器、跨子网、企业网乃至于 Internet；以宿主程序而论，可以以ASP.NET，EXE，WPF，Windows Forms，NT Service，COM+作为宿主(Host)。&lt;/p&gt;</summary>
    
    
    
    <category term="C#" scheme="https://drfengling.github.io/categories/C/"/>
    
    
    <category term="WCF" scheme="https://drfengling.github.io/tags/WCF/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客添加Gitalk评论</title>
    <link href="https://drfengling.github.io/qm/212a5789.html"/>
    <id>https://drfengling.github.io/qm/212a5789.html</id>
    <published>2022-04-27T03:09:16.000Z</published>
    <updated>2022-04-27T06:30:08.568Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Gitalk 是一个基于 GitHub Issue 和 Preact 开发的评论插件。<br>更详细用法看官网<a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md">https://github.com/gitalk/gitalk/blob/master/readme-cn.md</a>这里只记录有诱惑的操作</p><span id="more"></span><h4 id="1-申请秘钥"><a href="#1-申请秘钥" class="headerlink" title="1.申请秘钥"></a>1.申请秘钥</h4><p>申请一个 OAuth application <a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a><br><img src="https://gitee.com/lucas27/pic-bed/raw/master/picture/%E6%96%B0%E5%BB%BA%E5%BA%94%E7%94%A8.jpg"><br>获取 ID 和 secrets，必须要保存好，然后以后就看不到了，忘记了只能重建。<br>上面的填写成功之后进入,我们需要的是生成的Client ID 和Client Secret<br><img src="/qm/212a5789/1.jpg"></p><h4 id="2-存储仓库"><a href="#2-存储仓库" class="headerlink" title="2.存储仓库"></a>2.存储仓库</h4><p>您需要选择一个公共github存储库（已存在或创建一个新的github存储库）用于存储评论<br><img src="/qm/212a5789/2.jpg"><br>如上所示,我新建了一个dryunment用来存储线上评论.如果没有可以点New新建一个仓库</p><h4 id="3-博客配置"><a href="#3-博客配置" class="headerlink" title="3.博客配置"></a>3.博客配置</h4><p>上面的确认无误后，我们进行配置博客，引入gitalk。</p><p>  首先进入主题的配置文件_config.yml(注意是主题的配置文件，不是博客根目录下的配置文件)，添加gitalk配置(一定要仔细，缺一不可)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  owner: github用户名</span><br><span class="line">  admin: github用户名</span><br><span class="line">  repo: 博客的仓库名称(注意不是地址)</span><br><span class="line">  ClientID: 上面生成的Client ID</span><br><span class="line">  ClientSecret: 上面生成的Client Secret</span><br></pre></td></tr></table></figure><p>上面配置完之后,进入主题目录\themes\kratos-rebirth\layout_comments目录，在当前目录下新建一个gitalk.ejs文件，写入如下代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">link</span> rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;&lt;%- url_npm_cdn(&#x27;gitalk@1/dist/gitalk.css&#x27;) %&gt;&quot;</span>&gt;</span><br><span class="line">&lt;div <span class="built_in">id</span>=<span class="string">&quot;gitalk-container&quot;</span> class=<span class="string">&quot;post-comments lazy-load&lt;% if (theme.posts.comments?.enableBGImage) &#123; %&gt; bg-image&lt;% &#125; %&gt;&quot;</span> style=<span class="string">&quot;padding-left:2rem; padding-right:2rem;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var load_comm = () =&gt; &#123;</span><br><span class="line">        const init = () =&gt; &#123;</span><br><span class="line">            console.log(<span class="string">&#x27;Gitalk loading...&#x27;</span>);</span><br><span class="line">            const gitalk = new Gitalk(Object.assign(&#123;</span><br><span class="line">                <span class="built_in">id</span>: <span class="string">&#x27;&lt;%- url_for(page.path) %&gt;&#x27;</span>,</span><br><span class="line">                path: <span class="string">&#x27;&lt;%- url_for(page.path) %&gt;&#x27;</span></span><br><span class="line">            &#125;, JSON.parse(<span class="string">&#x27;&lt;%- JSON.stringify(theme.gitalk) %&gt;&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">            gitalk.render(<span class="string">&#x27;gitalk-container&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (typeof Gitalk === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">            const src = <span class="string">&#x27;&lt;%- url_npm_cdn(&quot;gitalk@1/dist/gitalk.min.js&quot;) %&gt;&#x27;</span>;</span><br><span class="line">            $.getScript(src, init);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            init();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">load_comm();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt;Please <span class="built_in">enable</span> JavaScript to view the &lt;a href=<span class="string">&quot;https://github.com/gitalk/gitalk&quot;</span>&gt;comments powered by Gitalk.&lt;/a&gt;&lt;/noscript&gt;</span><br></pre></td></tr></table></figure><h4 id="4-博客部署"><a href="#4-博客部署" class="headerlink" title="4.博客部署"></a>4.博客部署</h4><p>键入命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>本地部署完成后可以打开博客文章访问就可以看到文章下方加载除评论区了,选择账号登录就可以进行评论了.<br>确认无误hexo d部署到服务器上<br><a href="https://drfengling.github.io/">https://drfengling.github.io</a><br>由于研究了多种博客评论系统 所以你看到的评论系统不一定是Gitalk.有问题评论区欢迎评论交流.<br>到此,Gitalk评论系统就完成啦，快来动手试试吧.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Gitalk 是一个基于 GitHub Issue 和 Preact 开发的评论插件。&lt;br&gt;更详细用法看官网&lt;a href=&quot;https://github.com/gitalk/gitalk/blob/master/readme-cn.md&quot;&gt;https://github.com/gitalk/gitalk/blob/master/readme-cn.md&lt;/a&gt;这里只记录有诱惑的操作&lt;/p&gt;</summary>
    
    
    
    <category term="线上评论" scheme="https://drfengling.github.io/categories/%E7%BA%BF%E4%B8%8A%E8%AF%84%E8%AE%BA/"/>
    
    
    <category term="Gitalk" scheme="https://drfengling.github.io/tags/Gitalk/"/>
    
  </entry>
  
  <entry>
    <title>livere评论系统</title>
    <link href="https://drfengling.github.io/qm/d318877c.html"/>
    <id>https://drfengling.github.io/qm/d318877c.html</id>
    <published>2022-04-27T01:21:11.000Z</published>
    <updated>2022-04-27T02:54:19.927Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="Hexo博客添加LiveRe评论系统"><a href="#Hexo博客添加LiveRe评论系统" class="headerlink" title="Hexo博客添加LiveRe评论系统"></a>Hexo博客添加LiveRe评论系统</h3><p>好久不见,又是长长的探索实践之旅了,最近在新加评论系统出现了各种问题,也有所得.<br>评论系统可以说五花八门啦，用得多的比如：Gitment、Gitalk、LiveRe、Disqus、disqusjs，twikoo, waline、Valine 等</p><span id="more"></span><h5 id="这里以LiveRe为例"><a href="#这里以LiveRe为例" class="headerlink" title="这里以LiveRe为例:"></a>这里以LiveRe为例:</h5><p>1.进入来必力官网 <a href="https://www.livere.com/">https://www.livere.com/</a><br>2.右上角个人头像点进去 有账号可以直接登录<br>3.没有就注册一个<a href="https://was.livere.me/register?lang=zh-cn">https://was.livere.me/register?lang=zh-cn</a>,填写自己的邮箱,我这里用了网易163邮箱,可以根据自己情况填写,填写密码完成注册.<br>4.注册以后登录进去，点击导航栏安装,选择City版进行安装，City版是免费的，对我们这种个人博客而言完全足够了<br><img src="/qm/d318877c/1.jpg"><br>5.接下来需要填写一些关于你想将LiveRe用于的博客的一些信息<br>6.填完之后，申请获取代码，此时其将会给你一段代码，该段代码等下需要加到你的个人博客的页面中，我们可以先将其复制并保存起来。</p><h3 id="LiveRe评论配置集成"><a href="#LiveRe评论配置集成" class="headerlink" title="LiveRe评论配置集成"></a>LiveRe评论配置集成</h3><p>1.回到我们的博客根目录打开themes主题文件夹 我用的是kratos-rebirth主题,以kratos-rebirth为例:<br><img src="/qm/d318877c/2.jpg"><br>打开_config.yml文件更改配置<br><img src="/qm/d318877c/3.jpg"><br>我们更改Post Page 文章页配置posts下属性comments的属性取值<br>这里用到的评论系统是livere 对应更改provider: livere<br>enableBGImage用来配置背景图片<br>2.找到\kratos-rebirth\layout_comments文件夹 更改 livere.ejs文件配置 没有可以创建一个<br>3.打开livere文件,新增来必力评论代码如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="built_in">id</span>=<span class="string">&quot;lv-container&quot;</span> class=<span class="string">&quot;post-comments lazy-load &lt;% if (theme.posts.comments?.enableBGImage) &#123; %&gt; bg-image&lt;% &#125; %&gt;&quot;</span> data-id=<span class="string">&quot;&lt;%- theme.livere.id || &#x27;city&#x27; %&gt;&quot;</span> data-uid=<span class="string">&quot;&lt;%- theme.livere.uid %&gt;&quot;</span>&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">   (<span class="keyword">function</span>(d, s) &#123;</span><br><span class="line">       var j, e = d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (typeof LivereTower === <span class="string">&#x27;function&#x27;</span>) &#123; <span class="built_in">return</span>; &#125;</span><br><span class="line"></span><br><span class="line">       j = d.createElement(s);</span><br><span class="line">       j.src = <span class="string">&#x27;https://cdn-city.livere.com/js/embed.dist.js&#x27;</span>;</span><br><span class="line">       j.async = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, <span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt;为正常使用来必力评论功能请激活JavaScript&lt;/noscript&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- City版安装代码已完成 --&gt;</span><br></pre></td></tr></table></figure><p>老样子,先来三杯小鸟伏特加 powershell或命令行打开博客根目录<br>键入命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>本地部署完成后可以打开博客文章访问就可以看到文章下方加载除评论区了,选择账号登录就可以进行评论了.<br>确认无误hexo d部署到服务器上<br><a href="https://drfengling.github.io/">https://drfengling.github.io</a><br>由于研究了多种博客评论系统 所以你看到的评论系统不一定是livere.有问题评论区欢迎评论交流.<br>到此,livere评论系统就完成啦，快来动手试试吧.</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Hexo博客添加LiveRe评论系统&quot;&gt;&lt;a href=&quot;#Hexo博客添加LiveRe评论系统&quot; class=&quot;headerlink&quot; title=&quot;Hexo博客添加LiveRe评论系统&quot;&gt;&lt;/a&gt;Hexo博客添加LiveRe评论系统&lt;/h3&gt;&lt;p&gt;好久不见,又是长长的探索实践之旅了,最近在新加评论系统出现了各种问题,也有所得.&lt;br&gt;评论系统可以说五花八门啦，用得多的比如：Gitment、Gitalk、LiveRe、Disqus、disqusjs，twikoo, waline、Valine 等&lt;/p&gt;</summary>
    
    
    
    <category term="线上评论" scheme="https://drfengling.github.io/categories/%E7%BA%BF%E4%B8%8A%E8%AF%84%E8%AE%BA/"/>
    
    
    <category term="livere" scheme="https://drfengling.github.io/tags/livere/"/>
    
  </entry>
  
  <entry>
    <title>博客美化(一)</title>
    <link href="https://drfengling.github.io/qm/5f88ef60.html"/>
    <id>https://drfengling.github.io/qm/5f88ef60.html</id>
    <published>2022-04-16T06:03:16.000Z</published>
    <updated>2022-04-30T07:39:08.230Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="博客美化"><a href="#博客美化" class="headerlink" title="博客美化"></a>博客美化</h2><h5 id="1-添加鼠标点击爱心效果"><a href="#1-添加鼠标点击爱心效果" class="headerlink" title="1.添加鼠标点击爱心效果"></a>1.添加鼠标点击爱心效果</h5><p>在\themes\kratos-rebirth\source\js下新建文件love.js,输入以下内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(e,t,a)&#123;<span class="keyword">function</span> <span class="function"><span class="title">n</span></span>()&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="keyword">function</span> <span class="function"><span class="title">r</span></span>()&#123;<span class="keyword">for</span>(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="keyword">function</span> <span class="function"><span class="title">o</span></span>()&#123;var t=<span class="string">&quot;function&quot;</span>==typeof e.onclick&amp;&amp;e.onclick;e.onclick=<span class="keyword">function</span>(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="keyword">function</span> i(e)&#123;var a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;<span class="keyword">function</span> c(e)&#123;var a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[0].appendChild(a)&#125;<span class="keyword">function</span> <span class="function"><span class="title">s</span></span>()&#123;<span class="built_in">return</span><span class="string">&quot;rgb(&quot;</span>+~~(255*Math.random())+<span class="string">&quot;,&quot;</span>+~~(255*Math.random())+<span class="string">&quot;,&quot;</span>+~~(255*Math.random())+<span class="string">&quot;)&quot;</span>&#125;var d=[];e.requestAnimationFrame=<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="keyword">function</span>(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);</span><br></pre></td></tr></table></figure><p>在\themes\kratos-rebirth\layout\layout.ejs文章末尾加入:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 页面点击小红心 --&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/love.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>完成!鼠标点击就可以看到小红心效果了</p><span id="more"></span><h5 id="2-添加鼠标点击烟花爆竹效果"><a href="#2-添加鼠标点击烟花爆竹效果" class="headerlink" title="2.添加鼠标点击烟花爆竹效果"></a>2.添加鼠标点击烟花爆竹效果</h5><p>在\themes\kratos-rebirth\source\js下新建文件fireworks.js,输入以下内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="keyword">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class="built_in">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class="keyword">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="keyword">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class="keyword">function</span> renderParticule(e)&#123;<span class="keyword">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="keyword">function</span> animateParticules(e,t)&#123;<span class="keyword">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.x&#125;,y:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class="string">&quot;linear&quot;</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule,offset:0&#125;)&#125;<span class="keyword">function</span> debounce(e,t)&#123;var a;<span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class="function"><span class="title">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="title">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=window.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class="function"><span class="title">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class="keyword">function</span>(e)&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!1)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="keyword">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class="built_in">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class="keyword">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="keyword">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class="built_in">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class="function"><span class="title">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class="keyword">function</span> renderParticule(e)&#123;<span class="keyword">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="keyword">function</span> animateParticules(e,t)&#123;<span class="keyword">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.x&#125;,y:<span class="keyword">function</span>(e)&#123;<span class="built_in">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class="string">&quot;linear&quot;</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class="string">&quot;easeOutExpo&quot;</span>,update:renderParticule,offset:0&#125;)&#125;<span class="keyword">function</span> debounce(e,t)&#123;var a;<span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class="function"><span class="title">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="title">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=window.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class="function"><span class="title">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class="keyword">function</span>(e)&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!1)&#125;;</span><br></pre></td></tr></table></figure><p>在\themes\kratos-rebirth\layout\layout.ejs文章末尾加入:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 页面点击烟花爆竹效果 --&gt;</span><br><span class="line">&lt;canvas class=<span class="string">&quot;fireworks&quot;</span> style=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;&lt;/canvas&gt; </span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;&lt;/script&gt; </span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/fireworks.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>完成!鼠标点击就可以看到烟花爆竹了<br><img src="/qm/5f88ef60/2.jpg"></p><h5 id="3-浏览器网页标题恶搞"><a href="#3-浏览器网页标题恶搞" class="headerlink" title="3.浏览器网页标题恶搞"></a>3.浏览器网页标题恶搞</h5><p>当用户访问你的博客时点击到了其他网页，我们可以恶搞一下网页标题，呼唤用户回来，首先在目录 \themes\kratos-rebirth\source\js 下新建一个 FunnyTitle.js 文件，在里面填写如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 浏览器搞笑标题</span><br><span class="line">var OriginTitle = document.title;</span><br><span class="line">var titleTime;</span><br><span class="line">document.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    <span class="keyword">if</span> (document.hidden) &#123;</span><br><span class="line">        $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;/images/favicon.ico&quot;</span>);</span><br><span class="line">        document.title = <span class="string">&#x27;╭(°A°`)╮ 页面崩溃啦 ~&#x27;</span>;</span><br><span class="line">        clearTimeout(titleTime);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;/images/favicon.ico&quot;</span>);</span><br><span class="line">        document.title = <span class="string">&#x27;(ฅ&gt;ω&lt;*ฅ) 噫又好啦 ~&#x27;</span> + OriginTitle;</span><br><span class="line">        titleTime = setTimeout(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">            document.title = OriginTitle;</span><br><span class="line">        &#125;, 2000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中 funny.ico 是用户切换到其他标签后你网站的图标，favicon.ico 是正常图标，然后在 \themes\kratos-rebirth\layout\layout.ejs 文件中添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--浏览器搞笑标题--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/js/FunnyTitle.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="4-背景添加动态线条效果"><a href="#4-背景添加动态线条效果" class="headerlink" title="4.背景添加动态线条效果"></a>4.背景添加动态线条效果</h5><p>在 \themes\kratos-rebirth\layout\layout.ejs 文件中添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--动态线条背景--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span></span><br><span class="line">color=<span class="string">&quot;220,220,220&quot;</span> opacity=<span class="string">&#x27;0.7&#x27;</span> zIndex=<span class="string">&quot;-2&quot;</span> count=<span class="string">&quot;200&quot;</span> src=<span class="string">&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;</span>&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>其中：</p><p>color：表示线条颜色，三个数字分别为(R,G,B)，默认：（0,0,0）<br>opacity：表示线条透明度（0~1），默认：0.5<br>count：表示线条的总数量，默认：150<br>zIndex：表示背景的z-index属性，css属性用于控制所在层的位置，默认：-1</p><h5 id="5-小宠物挂件-小仓鼠"><a href="#5-小宠物挂件-小仓鼠" class="headerlink" title="5.小宠物挂件(小仓鼠)"></a>5.小宠物挂件(小仓鼠)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe width=<span class="string">&quot;100%&quot;</span> height=<span class="string">&quot;300&quot;</span> frameborder=<span class="string">&quot;0&quot;</span> src=<span class="string">&quot;https://cdn.abowman.com/widgets/hamster/hamster.html?up_bgColor=425066&amp;up_bodyColor=C0C0C0&amp;up_earColor=C0C0C0&amp;up_snoutColor=FFFFFF&amp;up_eyeColor=392f41&amp;up_feetColor=FFFFFF&amp;up_tailColor=C0C0C0&amp;up_waterColor=87CEFA&amp;up_foodColor=cba920&amp;up_wheelColor=ffffff&amp;up_wheelOuterColor=ff4d4d&amp;up_wheelCenterColor=ffffff&amp;up_wheelSpokeColor=dedede&quot;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><iframe width="100%" height="300" frameborder="0" src="https://cdn.abowman.com/widgets/hamster/hamster.html?up_bgColor=425066&up_bodyColor=C0C0C0&up_earColor=C0C0C0&up_snoutColor=FFFFFF&up_eyeColor=392f41&up_feetColor=FFFFFF&up_tailColor=C0C0C0&up_waterColor=87CEFA&up_foodColor=cba920&up_wheelColor=ffffff&up_wheelOuterColor=ff4d4d&up_wheelCenterColor=ffffff&up_wheelSpokeColor=dedede"></iframe><h5 id="6-天气预报"><a href="#6-天气预报" class="headerlink" title="6.天气预报"></a>6.天气预报</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe allowtransparency=<span class="string">&quot;true&quot;</span> frameborder=<span class="string">&quot;0&quot;</span> width=<span class="string">&quot;100%&quot;</span> height=<span class="string">&quot;200&quot;</span> scrolling=<span class="string">&quot;no&quot;</span> src=<span class="string">&quot;//tianqi.2345.com/plugin/widget/index.htm?s=2&amp;z=1&amp;t=1&amp;v=0&amp;d=5&amp;bd=1&amp;k=000000&amp;f=&amp;ltf=009944&amp;htf=cc0000&amp;q=1&amp;e=1&amp;a=1&amp;c=54511&amp;w=100%&amp;h=200&amp;align=center&quot;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><iframe allowtransparency="true" frameborder="0" width="100%" height="200" scrolling="no" src="//tianqi.2345.com/plugin/widget/index.htm?s=2&z=1&t=1&v=0&d=5&bd=1&k=000000&f=&ltf=009944&htf=cc0000&q=1&e=1&a=1&c=54511&w=100%&h=200&align=center"></iframe>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;博客美化&quot;&gt;&lt;a href=&quot;#博客美化&quot; class=&quot;headerlink&quot; title=&quot;博客美化&quot;&gt;&lt;/a&gt;博客美化&lt;/h2&gt;&lt;h5 id=&quot;1-添加鼠标点击爱心效果&quot;&gt;&lt;a href=&quot;#1-添加鼠标点击爱心效果&quot; class=&quot;headerlink&quot; title=&quot;1.添加鼠标点击爱心效果&quot;&gt;&lt;/a&gt;1.添加鼠标点击爱心效果&lt;/h5&gt;&lt;p&gt;在\themes\kratos-rebirth\source\js下新建文件love.js,输入以下内容:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;!&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(e,t,a)&amp;#123;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;n&lt;/span&gt;&lt;/span&gt;()&amp;#123;c(&lt;span class=&quot;string&quot;&gt;&amp;quot;.heart&amp;#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&amp;#125;.heart:after,.heart:before&amp;#123;content: &amp;#x27;&amp;#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;&amp;#125;.heart:after&amp;#123;top: -5px;&amp;#125;.heart:before&amp;#123;left: -5px;&amp;#125;&amp;quot;&lt;/span&gt;),o(),r()&amp;#125;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;r&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(var e=0;e&amp;lt;d.length;e++)d[e].alpha&amp;lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=&lt;span class=&quot;string&quot;&gt;&amp;quot;left:&amp;quot;&lt;/span&gt;+d[e].x+&lt;span class=&quot;string&quot;&gt;&amp;quot;px;top:&amp;quot;&lt;/span&gt;+d[e].y+&lt;span class=&quot;string&quot;&gt;&amp;quot;px;opacity:&amp;quot;&lt;/span&gt;+d[e].alpha+&lt;span class=&quot;string&quot;&gt;&amp;quot;;transform:scale(&amp;quot;&lt;/span&gt;+d[e].scale+&lt;span class=&quot;string&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;+d[e].scale+&lt;span class=&quot;string&quot;&gt;&amp;quot;) rotate(45deg);background:&amp;quot;&lt;/span&gt;+d[e].color+&lt;span class=&quot;string&quot;&gt;&amp;quot;;z-index:99999&amp;quot;&lt;/span&gt;);requestAnimationFrame(r)&amp;#125;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;o&lt;/span&gt;&lt;/span&gt;()&amp;#123;var t=&lt;span class=&quot;string&quot;&gt;&amp;quot;function&amp;quot;&lt;/span&gt;==typeof e.onclick&amp;amp;&amp;amp;e.onclick;e.onclick=&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(e)&amp;#123;t&amp;amp;&amp;amp;t(),i(e)&amp;#125;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; i(e)&amp;#123;var a=t.createElement(&lt;span class=&quot;string&quot;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;);a.className=&lt;span class=&quot;string&quot;&gt;&amp;quot;heart&amp;quot;&lt;/span&gt;,d.push(&amp;#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&amp;#125;),t.body.appendChild(a)&amp;#125;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; c(e)&amp;#123;var a=t.createElement(&lt;span class=&quot;string&quot;&gt;&amp;quot;style&amp;quot;&lt;/span&gt;);a.type=&lt;span class=&quot;string&quot;&gt;&amp;quot;text/css&amp;quot;&lt;/span&gt;;try&amp;#123;a.appendChild(t.createTextNode(e))&amp;#125;catch(t)&amp;#123;a.styleSheet.cssText=e&amp;#125;t.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&amp;quot;head&amp;quot;&lt;/span&gt;)[0].appendChild(a)&amp;#125;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;s&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;quot;rgb(&amp;quot;&lt;/span&gt;+~~(255*Math.random())+&lt;span class=&quot;string&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;+~~(255*Math.random())+&lt;span class=&quot;string&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;+~~(255*Math.random())+&lt;span class=&quot;string&quot;&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&amp;#125;var d=[];e.requestAnimationFrame=&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;function&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(e)&amp;#123;setTimeout(e,1e3/60)&amp;#125;&amp;#125;(),n()&amp;#125;(window,document);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在\themes\kratos-rebirth\layout\layout.ejs文章末尾加入:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;!-- 页面点击小红心 --&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;script &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; src=&lt;span class=&quot;string&quot;&gt;&amp;quot;/js/love.js&amp;quot;&lt;/span&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;完成!鼠标点击就可以看到小红心效果了&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="博客美化" scheme="https://drfengling.github.io/tags/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(六)</title>
    <link href="https://drfengling.github.io/qm/31df0a78.html"/>
    <id>https://drfengling.github.io/qm/31df0a78.html</id>
    <published>2022-04-16T01:40:04.000Z</published>
    <updated>2022-04-19T06:39:00.329Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="Aplayer音乐播放器"><a href="#Aplayer音乐播放器" class="headerlink" title="Aplayer音乐播放器"></a>Aplayer音乐播放器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting <span class="string">&quot;19723756&quot;</span> <span class="string">&quot;netease&quot;</span> <span class="string">&quot;playlist&quot;</span> %&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>如果没有显示歌单,请刷新一下.</p>    <div id="aplayer-LDamGnPH" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="19723756" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"    ></div>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Aplayer音乐播放器&quot;&gt;&lt;a href=&quot;#Aplayer音乐播放器&quot; class=&quot;headerlink&quot; title=&quot;Aplayer音乐播放器&quot;&gt;&lt;/a&gt;Aplayer音乐播放器&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;% meting &lt;span class=&quot;string&quot;&gt;&amp;quot;19723756&amp;quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;netease&amp;quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;playlist&amp;quot;&lt;/span&gt; %&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="Aplayer" scheme="https://drfengling.github.io/tags/Aplayer/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(五)</title>
    <link href="https://drfengling.github.io/qm/a8d0420a.html"/>
    <id>https://drfengling.github.io/qm/a8d0420a.html</id>
    <published>2022-04-15T07:46:26.000Z</published>
    <updated>2022-04-19T06:39:31.441Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h2><h5 id="插入B站视频"><a href="#插入B站视频" class="headerlink" title="插入B站视频"></a>插入B站视频</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;</span>&gt;&lt;iframe </span><br><span class="line">src=<span class="string">&quot;//player.bilibili.com/player.html?aid=39807850&amp;cid=69927212&amp;page=1&quot;</span> scrolling=<span class="string">&quot;no&quot;</span> border=<span class="string">&quot;0&quot;</span> </span><br><span class="line">frameborder=<span class="string">&quot;no&quot;</span> framespacing=<span class="string">&quot;0&quot;</span> allowfullscreen=<span class="string">&quot;true&quot;</span> style=<span class="string">&quot;position: absolute; width: 100%; </span></span><br><span class="line"><span class="string">height: 100%; left: 0; top: 0;&quot;</span>&gt; &lt;/iframe&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><span id="more"></span><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=39807850&cid=69927212&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;插入视频&quot;&gt;&lt;a href=&quot;#插入视频&quot; class=&quot;headerlink&quot; title=&quot;插入视频&quot;&gt;&lt;/a&gt;插入视频&lt;/h2&gt;&lt;h5 id=&quot;插入B站视频&quot;&gt;&lt;a href=&quot;#插入B站视频&quot; class=&quot;headerlink&quot; title=&quot;插入B站视频&quot;&gt;&lt;/a&gt;插入B站视频&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;div style=&lt;span class=&quot;string&quot;&gt;&amp;quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&amp;quot;&lt;/span&gt;&amp;gt;&amp;lt;iframe &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;src=&lt;span class=&quot;string&quot;&gt;&amp;quot;//player.bilibili.com/player.html?aid=39807850&amp;amp;cid=69927212&amp;amp;page=1&amp;quot;&lt;/span&gt; scrolling=&lt;span class=&quot;string&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt; border=&lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;frameborder=&lt;span class=&quot;string&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt; framespacing=&lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt; allowfullscreen=&lt;span class=&quot;string&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt; style=&lt;span class=&quot;string&quot;&gt;&amp;quot;position: absolute; width: 100%; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;height: 100%; left: 0; top: 0;&amp;quot;&lt;/span&gt;&amp;gt; &amp;lt;/iframe&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="视频" scheme="https://drfengling.github.io/tags/%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(四)</title>
    <link href="https://drfengling.github.io/qm/ae7b1577.html"/>
    <id>https://drfengling.github.io/qm/ae7b1577.html</id>
    <published>2022-04-15T07:39:32.000Z</published>
    <updated>2022-04-19T06:39:23.184Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="插入音乐"><a href="#插入音乐" class="headerlink" title="插入音乐"></a>插入音乐</h2><p>需要使用 iframe 标签</p><p>在实际运用中，可以使用网易云音乐，搜索想要的歌曲，点击歌曲名字进入播放器页面，点击生成外链播放器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe frameborder=<span class="string">&quot;no&quot;</span> border=<span class="string">&quot;0&quot;</span> marginwidth=<span class="string">&quot;0&quot;</span> marginheight=<span class="string">&quot;0&quot;</span> width=100% height=86 src=<span class="string">&quot;//music.163.com/outchain/player?type=3&amp;id=2501767770&amp;auto=1&amp;height=66&quot;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><span id="more"></span><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=86 src="//music.163.com/outchain/player?type=3&id=2501767770&auto=1&height=66"></iframe>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;插入音乐&quot;&gt;&lt;a href=&quot;#插入音乐&quot; class=&quot;headerlink&quot; title=&quot;插入音乐&quot;&gt;&lt;/a&gt;插入音乐&lt;/h2&gt;&lt;p&gt;需要使用 iframe 标签&lt;/p&gt;
&lt;p&gt;在实际运用中，可以使用网易云音乐，搜索想要的歌曲，点击歌曲名字进入播放器页面，点击生成外链播放器。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;iframe frameborder=&lt;span class=&quot;string&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt; border=&lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt; marginwidth=&lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt; marginheight=&lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt; width=100% height=86 src=&lt;span class=&quot;string&quot;&gt;&amp;quot;//music.163.com/outchain/player?type=3&amp;amp;id=2501767770&amp;amp;auto=1&amp;amp;height=66&amp;quot;&lt;/span&gt;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="音乐" scheme="https://drfengling.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(三)</title>
    <link href="https://drfengling.github.io/qm/5438fa78.html"/>
    <id>https://drfengling.github.io/qm/5438fa78.html</id>
    <published>2022-04-15T06:41:37.000Z</published>
    <updated>2022-04-19T06:39:11.589Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="创建歌单页面"><a href="#创建歌单页面" class="headerlink" title="创建歌单页面"></a>创建歌单页面</h2><p>由于我想在单独的页面加入歌单，所以额外创了个页面，也可以直接在文章中插入，原理都是一样的。</p><span id="more"></span><p>新建页面，命名为playlist：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page playlist</span><br></pre></td></tr></table></figure><p>这时候在 /Hexo/source 文件夹下会生成一个playlist文件夹，打开里面的index.md，修改如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: 歌单</span><br><span class="line"><span class="built_in">date</span>: 2019-02-21 16:14:00</span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;playlist&quot;</span></span><br></pre></td></tr></table></figure><p>打开主题的 _config.yml文件，在menu下新建一个名为playlist的类（注意这里使用的图标是图标库中的图标，网址为 <a href="http://www.fontawesome.com.cn/faicons/">http://www.fontawesome.com.cn/faicons/</a> 。可以选择自己喜欢的图标，我这里选择的是music）。完成后如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  archives: /archives/ || archive</span><br><span class="line">  playlist: /playlist/ || music</span><br><span class="line">  about: /about/ || user</span><br></pre></td></tr></table></figure><p>打开/Hexo/themes/hexo-theme-next/languages/zh-Hans.yml，添加对应的中文翻译：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  playlist: 歌单</span><br></pre></td></tr></table></figure><p>这样歌单就创建完成啦~</p><p>使用 hexo-tag-aplayer 插件<br>hexo-tag-aplayer 是Aplayer在hexo上的插件，这里的配置参考的是官方文档 ，第一步安装 hexo-tag-aplayer：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure><p>最新版的 hexo-tag-aplayer 已经支持了MetingJS的使用，可以直接解析网络平台的歌曲（简直是神器），首先要在站点配置文件中开启meting模式，添加以下代码在配置文件的最后：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aplayer:</span><br><span class="line">  meting: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>复制歌单的链接，然后复制歌单的id，例如 <a href="https://music.163.com/playlist?id=19723756">https://music.163.com/playlist?id=19723756</a> ，这个歌单的id就是19723756，公司名可以是tencent、netease或是其他公司，下面给出一个例子，打开 /Hexo/source/playlist/index.md文件，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting <span class="string">&quot;523845661&quot;</span> <span class="string">&quot;netease&quot;</span> <span class="string">&quot;playlist&quot;</span> <span class="string">&quot;theme:#FF4081&quot;</span> <span class="string">&quot;mode:circulation&quot;</span> <span class="string">&quot;mutex:true&quot;</span> <span class="string">&quot;listmaxheight:340px&quot;</span> <span class="string">&quot;preload:auto&quot;</span> %&#125;</span><br></pre></td></tr></table></figure><p>效果还是很不错的：<br><img src="/qm/5438fa78/1650007670.jpg"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;创建歌单页面&quot;&gt;&lt;a href=&quot;#创建歌单页面&quot; class=&quot;headerlink&quot; title=&quot;创建歌单页面&quot;&gt;&lt;/a&gt;创建歌单页面&lt;/h2&gt;&lt;p&gt;由于我想在单独的页面加入歌单，所以额外创了个页面，也可以直接在文章中插入，原理都是一样的。&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="音乐" scheme="https://drfengling.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(二)</title>
    <link href="https://drfengling.github.io/qm/4b6f21d9.html"/>
    <id>https://drfengling.github.io/qm/4b6f21d9.html</id>
    <published>2022-04-15T01:18:10.000Z</published>
    <updated>2022-04-19T06:39:43.487Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="新建文章与页面"><a href="#新建文章与页面" class="headerlink" title="新建文章与页面"></a>新建文章与页面</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;title&quot;</span>  <span class="comment"># 生成新文章: \source\_posts\title.md</span></span><br><span class="line">hexo new page <span class="string">&quot;title&quot;</span>  <span class="comment"># 生成新的页面, 后面可在主题配置文件中配置页面</span></span><br></pre></td></tr></table></figure><p>生成文章或页面的模板放在博客文件夹根目录下的 scaffolds/ 文件夹里面, 文章对应的是 post.md , 页面对应的是page.md, 草稿的是draft.md</p><span id="more"></span><h2 id="编辑文章"><a href="#编辑文章" class="headerlink" title="编辑文章"></a>编辑文章</h2><p>打开新建的文章\source_posts\postName.md, 其中postName是hexo new “title”中的title</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 搭建个人博客(二)  <span class="comment"># 文章页面上的显示名称, 可以任意修改, 不会出现在URL中</span></span><br><span class="line">categories: <span class="comment"># 文章分类目录, 多个分类使用[a,b,c]这种格式</span></span><br><span class="line">  - 博客日记</span><br><span class="line">tags:  <span class="comment"># 文章标签</span></span><br><span class="line">  - Hexo</span><br><span class="line">  - GitHub</span><br><span class="line">  - Nodejs</span><br><span class="line">abbrlink: 4b6f21d9 <span class="comment">#短链接</span></span><br><span class="line"><span class="built_in">date</span>: 2022-04-15 09:18:10 <span class="comment"># 文章生成时间, 一般不改</span></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里开始使用markdown格式输入你的正文. </span></span><br><span class="line"></span><br><span class="line">&lt;!--more--&gt; </span><br><span class="line"><span class="comment">#more标签以下的内容要点击“继续阅读”才能看见</span></span><br></pre></td></tr></table></figure><h2 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h2><h3 id="插入图片有三种方式"><a href="#插入图片有三种方式" class="headerlink" title="插入图片有三种方式"></a>插入图片有三种方式</h3><h4 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h4><p>在博客根目录的 source 文件夹下新建一个 img 文件夹专门存放图片, 在博文中引用的图片路径为 /img/图片名.后缀</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](图片路径)</span><br></pre></td></tr></table></figure><h4 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h4><h5 id="图片插件"><a href="#图片插件" class="headerlink" title="图片插件"></a>图片插件</h5><p>在hexo中使用文章资源文件夹需要在config.yaml文件中更改一下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>当该配置被应用后，使用hexo new命令创建新文章时，会生成相同名字的文件夹，也就是文章资源文件夹。</p><p>插件hexo-renderer-marked解决了这个问题。可以只用npm install hexo-renderer-marked命令直接安装，之后在config.yaml中更改配置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: <span class="literal">true</span></span><br><span class="line">marked:</span><br><span class="line">  prependRoot: <span class="literal">true</span></span><br><span class="line">  postAsset: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>图片放入文章资源夹 之后就可以在使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](image.jpg)</span><br></pre></td></tr></table></figure><p><img src="/qm/4b6f21d9/image.jpg">的方式愉快的插入图片了。</p><h4 id="方式三"><a href="#方式三" class="headerlink" title="方式三"></a>方式三</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](使用网络图片:http://www.dmoe.cc/random.php)</span><br></pre></td></tr></table></figure><p><img src="http://www.dmoe.cc/random.php"></p><h2 id="简单的命令"><a href="#简单的命令" class="headerlink" title="简单的命令"></a>简单的命令</h2><h4 id="总结一下简单的使用命令"><a href="#总结一下简单的使用命令" class="headerlink" title="总结一下简单的使用命令"></a>总结一下简单的使用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder] <span class="comment"># 初始化一个网站. 如果没有设置 folder , Hexo 默认在目前的文件夹建立网站</span></span><br><span class="line">hexo new [layout] &lt;title&gt; <span class="comment"># 新建一篇文章. 如果没有设置 layout 的话, 默认使用 _config.yml 中的 default_layout 参数代替. 如果标题包含空格的话, 请使用引号括起来</span></span><br><span class="line">hexo version <span class="comment"># 查看版本</span></span><br><span class="line">hexo clean <span class="comment"># 清除缓存文件 (db.json) 和已生成的静态文件 (public)</span></span><br><span class="line">hexo g <span class="comment"># 等于hexo generate # 生成静态文件</span></span><br><span class="line">hexo s <span class="comment"># 等于hexo server # 本地预览</span></span><br><span class="line">hexo d <span class="comment"># 等于hexo deploy # 部署, 可与hexo g合并为 hexo d -g</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;新建文章与页面&quot;&gt;&lt;a href=&quot;#新建文章与页面&quot; class=&quot;headerlink&quot; title=&quot;新建文章与页面&quot;&gt;&lt;/a&gt;新建文章与页面&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo new &lt;span class=&quot;string&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# 生成新文章: \source\_posts\title.md&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo new page &lt;span class=&quot;string&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# 生成新的页面, 后面可在主题配置文件中配置页面&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;生成文章或页面的模板放在博客文件夹根目录下的 scaffolds/ 文件夹里面, 文章对应的是 post.md , 页面对应的是page.md, 草稿的是draft.md&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="Hexo" scheme="https://drfengling.github.io/tags/Hexo/"/>
    
    <category term="GitHub" scheme="https://drfengling.github.io/tags/GitHub/"/>
    
    <category term="Nodejs" scheme="https://drfengling.github.io/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客(一)</title>
    <link href="https://drfengling.github.io/qm/387162d6.html"/>
    <id>https://drfengling.github.io/qm/387162d6.html</id>
    <published>2022-04-13T00:48:09.000Z</published>
    <updated>2022-04-19T06:39:53.617Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="一-初识Hexo"><a href="#一-初识Hexo" class="headerlink" title="一.初识Hexo;"></a>一.初识Hexo;</h3><p>快速、简洁且高效的博客框架，官网：<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a>是这么介绍的，嗯，有道理，那么我就不赘述了，想要更透彻了解的可自行查阅。</p><p>但是要知道它是个博客框架，有很多好看的主题<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>可以应用在自己的博客上，这篇文章要讲述如何用hexo写博客并部署到github上就好了。</p><span id="more"></span><h3 id="二-安装前提"><a href="#二-安装前提" class="headerlink" title="二.安装前提;"></a>二.安装前提;</h3><p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p><p><a href="https://nodejs.org/">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)<br><a href="http://git-scm.com/">Git</a><br>如果您的电脑中已经安装上述必备程序，那么恭喜您！你可以直接前往 安装 Hexo 步骤。</p><h3 id="三-安装Hexo"><a href="#三-安装Hexo" class="headerlink" title="三.安装Hexo;"></a>三.安装Hexo;</h3><p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>进阶安装和使用<br>对于熟悉 npm 的进阶用户，可以仅局部安装 hexo 包。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo</span><br></pre></td></tr></table></figure><h3 id="四-搭建博客"><a href="#四-搭建博客" class="headerlink" title="四.搭建博客;"></a>四.搭建博客;</h3><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>这里我在J:\WEIXIN\Blog下新建了文件夹博客日记作为演示<br>1.打开cmd命令行或Windows Power Shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Windows PowerShell</span><br><span class="line">版权所有 (C) Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">尝试新的跨平台 PowerShell https://aka.ms/pscore6</span><br><span class="line"></span><br><span class="line">PS C:\Users\Administrator&gt; J:</span><br></pre></td></tr></table></figure><p>2.切换到J盘文件夹目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS J:\&gt; <span class="built_in">cd</span> J:\WEIXIN\Blog\博客日记</span><br></pre></td></tr></table></figure><p>3.初始化hexo博客文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo init</span><br><span class="line">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class="line">[32mINFO [39m Install dependencies</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure><p>新建完成后，指定文件夹的目录如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br><span class="line">_config.yml</span><br></pre></td></tr></table></figure><p>网站的 配置 信息，您可以在此配置大部分的参数。</p><p>package.json<br>应用程序的信息。EJS, Stylus 和 Markdown renderer 已默认安装，您可以自由移除。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hexo-site&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;hexo&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;hexo&quot;</span>: <span class="string">&quot;^3.8.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-generator-archive&quot;</span>: <span class="string">&quot;^0.1.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-generator-category&quot;</span>: <span class="string">&quot;^0.1.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-generator-index&quot;</span>: <span class="string">&quot;^0.2.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-generator-tag&quot;</span>: <span class="string">&quot;^0.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-renderer-ejs&quot;</span>: <span class="string">&quot;^0.3.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-renderer-stylus&quot;</span>: <span class="string">&quot;^0.3.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-renderer-marked&quot;</span>: <span class="string">&quot;^0.3.2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hexo-server&quot;</span>: <span class="string">&quot;^0.3.3&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>scaffolds<br>模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。</p><p>Hexo的模板是指在新建的文章文件中默认填充的内容。例如，如果您修改scaffold/post.md中的Front-matter内容，那么每次新建一篇文章时都会包含这个修改。</p><p>source<br>资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</p><p>themes<br>主题 文件夹。Hexo 会根据主题来生成静态页面。<br>4.启动Hexo $ hexo s</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo s</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>5.浏览器输入：<a href="http://localhost:4000/">http://localhost:4000</a>，可查看到默认生成了一篇博文：<br><img src="/qm/387162d6/HexoIndex.jpg"></p><p>6.新建一篇博文<br>ctrl+c断开刚刚的链接，新建一篇博文：hexo n “发布第二篇个人博客”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo n <span class="string">&quot;发布第二篇个人博客&quot;</span></span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Created: J:\WEIXIN\Blog\博客1\<span class="built_in">source</span>\_posts\发布第二篇个人博客.md</span><br><span class="line">PS J:\WEIXIN\Blog\博客日记&gt;</span><br></pre></td></tr></table></figure><p>5、接下来就是更改博文内容，可以选择用命令行，也可用开发工具，我直接使用记事本打开该文件了，找到相应的位置，做修改即可<br><img src="/qm/387162d6/HexobowenCreate.jpg"><br>6、同样在博客日记文件下： 清理：hexo clean 生成：hexo g 启动：hexo s</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo cl</span><br><span class="line">..</span><br><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo g</span><br><span class="line">..</span><br><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo s</span><br></pre></td></tr></table></figure><p><img src="/qm/387162d6/hexobowen2.jpg"><br>完成!</p><h3 id="五-部署到Github上"><a href="#五-部署到Github上" class="headerlink" title="五.部署到Github上;"></a>五.部署到Github上;</h3><p>1、登录github：<a href="https://github.com/">https://github.com</a>，没账号的新建一个，新创建一个仓库New repository，仓库名必须为：昵称.github.io:，输入描述，创建：<br><img src="/qm/387162d6/1.jpg"><br><img src="/qm/387162d6/2.jpg"><br>2、命令行下，ctrl+c，退出命令，仍然在博客日记目录下，安装git部署插件：npm install hexo-deployer-git –save</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>3、更改博客日记文件夹下，_config.yml的配置，我直接用记事本了，用命令行修改也可以：</p><p>repo为第一步创建的git仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/Drfengling/Drfengling.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><p>4.回到命令行部署到远端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo d</span><br></pre></td></tr></table></figure><p>中间会让输入github密码，输入即可，后续部署完成，即可访问你的远端地址：<br><a href="https://drfengling.github.io/">https://Drfengling.github.io</a><br>###五.Hexo主题的使用；<br>1、选主题：<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>，有很多主题可供选择，也可使用网友推荐的自己喜欢的主题，有相应的预览、github地址：</p><p>我这里使用的是： diaspora： <a href="https://github.com/Fechin/hexo-theme-diaspora">https://github.com/Fechin/hexo-theme-diaspora</a></p><p>有相应的安装方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; git <span class="built_in">clone</span> https://github.com/Fechin/hexo-theme-diaspora.git themes/diaspora</span><br></pre></td></tr></table></figure><p>修改Hexo配置文件 _config.yml 主题项设置为diaspora</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">theme: diaspora</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>3、清理、启动：</p><p>清理：hexo clean 生成：hexo g 启动：hexo s</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo cl</span><br><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo g</span><br><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo s</span><br></pre></td></tr></table></figure><p>在本地刷新预览<a href="http://localhost:4000/">http://localhost:4000</a>之后，看到主题效果，可根据自己需要做相应修改即可。</p><p>4、推至远端：</p><p>ctrl+c退出上一步命令，然后推至远端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS J:\WEIXIN\Blog\博客日记&gt; hexo d</span><br></pre></td></tr></table></figure><p>刷新查看：<a href="https://drfengling.github.io/">https://Drfengling.github.io</a><br>以上就是搭建个人博客的全过程了，也可以购买自己的域名，放置自己的域名下</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一-初识Hexo&quot;&gt;&lt;a href=&quot;#一-初识Hexo&quot; class=&quot;headerlink&quot; title=&quot;一.初识Hexo;&quot;&gt;&lt;/a&gt;一.初识Hexo;&lt;/h3&gt;&lt;p&gt;快速、简洁且高效的博客框架，官网：&lt;a href=&quot;https://hexo.io/zh-cn/&quot;&gt;https://hexo.io/zh-cn/&lt;/a&gt;是这么介绍的，嗯，有道理，那么我就不赘述了，想要更透彻了解的可自行查阅。&lt;/p&gt;
&lt;p&gt;但是要知道它是个博客框架，有很多好看的主题&lt;a href=&quot;https://hexo.io/themes/&quot;&gt;https://hexo.io/themes/&lt;/a&gt;可以应用在自己的博客上，这篇文章要讲述如何用hexo写博客并部署到github上就好了。&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="Hexo" scheme="https://drfengling.github.io/tags/Hexo/"/>
    
    <category term="GitHub" scheme="https://drfengling.github.io/tags/GitHub/"/>
    
    <category term="Nodejs" scheme="https://drfengling.github.io/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://drfengling.github.io/qm/4a17b156.html"/>
    <id>https://drfengling.github.io/qm/4a17b156.html</id>
    <published>2022-04-12T03:04:16.405Z</published>
    <updated>2022-04-14T09:07:21.479Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="Hexo" scheme="https://drfengling.github.io/tags/Hexo/"/>
    
    <category term="GitHub" scheme="https://drfengling.github.io/tags/GitHub/"/>
    
    <category term="Nodejs" scheme="https://drfengling.github.io/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>为什么要写博客?</title>
    <link href="https://drfengling.github.io/qm/d2b740ea.html"/>
    <id>https://drfengling.github.io/qm/d2b740ea.html</id>
    <published>2022-04-12T02:40:14.000Z</published>
    <updated>2022-04-19T06:40:02.609Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="一个选择"><a href="#一个选择" class="headerlink" title="一个选择"></a>一个选择</h3><p>我知道现在可能说这话有点不合时宜，毕竟博客时代都已经过去了，再号召大家用过就好像时的东西是不是有点逆流而上？</p><p>我曾经也问过自己这个问题，但是我觉得，博客时代过去跟我们要开博客是没有多大关系的，就好像你的读书时代已经过去你就不再读书一样。</p><p>判断一件事情值不值得去做有一个方法：在一张白纸的左边写不值得做的原因，然后在右边写值得做的原因，写完一比较，一权衡，自然能够得出结果。</p><span id="more"></span><p>大家都成年人了，你会觉得这样思考分析总结的过程才是正确的思考的方法吧？</p><p>所以，我在这里列出要写（独立）博客的原因，供大家去选择，然后填在你白纸的右边。</p><p>注意，我不是给你一个建议，而是提供一个选择，这个选择蕴藏着我也不知道的可能。</p><h3 id="博客的内容"><a href="#博客的内容" class="headerlink" title="博客的内容"></a>博客的内容</h3><p>写博客不难，你可以当作是生活的记录，但是这样的记录没有任何的意义。写要对得住写本身，写出来的东西应该是思考的结果。我认为，如果你要开一个博客，博客的内容应该是这样的：</p><ol><li>不是生活杂记、不是流水账、不是牢骚、不是抱怨、不是心情琐记……；</li><li>有目的地写，要务实，追求质量；</li><li>承认真实的自己，不要吹嘘，不要装逼，无需讨好读者；</li><li>记录自己学习、思考、总结的过程；</li><li>分享你的故事、所得、感想、经验；<br>值得写的原因<br>以下是一个清单，可以根据自己的情况匹配，然后选择。</li></ol><h3 id="重新认识自己"><a href="#重新认识自己" class="headerlink" title="重新认识自己"></a>重新认识自己</h3><p>是不是很久没有跟自己对话了？</p><p>你可以尝试从回答一些问题开始，将你过去要回避的问题写下来，例如就可以从这个九个问题开始：</p><p>1、请你介绍一下你自己，你是个什么样的人？</p><p>2、你有什么理想吗？这个理想是怎么形成的？</p><p>3、你理想的伴侣关系是什么样的？你自己在这个伴侣关系中扮演什么样的角色？要承担什么样的责任？</p><p>4、你理想的事业是什么，你正在做的工作符合你的事业理想吗？这份工作对你的意义是什么？</p><p>5、你对亲子关系怎么看？对你来说，什么是一个理想的父亲（母亲），你期望自己成为这样一个理想父亲（母亲）吗？</p><p>6、你对钱怎么看，你认为赚到多少钱是足够的？如果你明天一早醒来，已经有足够的钱，你将会如何继续安排自己的生活？</p><p>7、你的择友标准是什么？什么样的人你会愿意交往，什么样的人你会拒绝和他交往？</p><p>8、你对死亡怎么看？你希望自己活到多少岁，你准备怎么度过从现在到死亡的这段时间？如果你要立遗嘱，这份遗嘱会怎么写？</p><p>以上的这八个问题摘自《很少人能顺畅回答这8个问题——心理治疗刚开始医生常常会先问你的 》by 李孟潮。</p><p>这些问题的答案你可以选择不发，但是我强烈地建议写下来，只有在写的时候你才可以慎重地思考这些问题，而不会回避跳过或者留下空白，这是接受自己的第一步。</p><h3 id="提供持续学习的动力"><a href="#提供持续学习的动力" class="headerlink" title="提供持续学习的动力"></a>提供持续学习的动力</h3><p>例如，我为自己设限每天写一千字，信息的不断输出给我带来恐惧，我害怕有一天我写无可写，于是我不停地阅读，通过个人的知识管理促使自己不断学习，提高核心竞争力。</p><h3 id="积累更多的知识"><a href="#积累更多的知识" class="headerlink" title="积累更多的知识"></a>积累更多的知识</h3><p>写并不是单纯的写。</p><p>例如你写着写着，你突然忘记了一个概念，于是上网找，找回来这个概念的时候，你重温这个概念，可能还会顺便看了一下这个概念的其他东西。</p><p>例如你需要获取第一手的资料，寻找信息来源本身就是一个知识积累的过程，同时，你慢慢就学会了鉴别知识：什么是没有用的心灵鸡汤，什么是不值得关注的吐槽名人，还有，在这个过程中，你还养成你的心智。</p><h3 id="提高将事情讲清楚的能力"><a href="#提高将事情讲清楚的能力" class="headerlink" title="提高将事情讲清楚的能力"></a>提高将事情讲清楚的能力</h3><p>很多东西你以为懂了，但当你在写下来的时候，你就觉得无从下手了。</p><p>如果一件事情你不能讲清楚，十有八九你还没有完全理解。</p><p>将事情写下来，慢慢就可以提高你的逻辑思维能力，分析能力，写会迫使你在你脑中搭建一个有条理的框架。例如我写这篇文章一样，我就将值得写博客的原因一点一点地罗列出来，事情就更加清晰，你也可以更好的思考问题。</p><h3 id="分享带来的连锁反应"><a href="#分享带来的连锁反应" class="headerlink" title="分享带来的连锁反应"></a>分享带来的连锁反应</h3><p>“通过分享，你获得了直接而快速的回报，你最终或许会发现你已将版权和“保留所有权利”抛诸脑后。新的经济学准则是：参与你作品的人越多，回报越高。在分享主义里，如果你愿意你可以保留所有权，但是我乐于分享。” by 毛向辉 《分享主义：一场思维革命》</p><p>互联网精神其中最重要的就是分享主义，基于分享主义，你可以享受到社会化及互联网给你带来的种种便利和好处，你分享了一个知识，你就成为了互联网中的一个点，这个点的大小由你自己来决定，互联网的大潮会将你的这个点推送到它所能触及的每个角落，让需要的人得到，同时，你的这个点也会继续扩大，连接到整个网络，这个点有可能连接成一张网，而你就是这张网的中心。</p><h3 id="帮你找到志同道合的人"><a href="#帮你找到志同道合的人" class="headerlink" title="帮你找到志同道合的人"></a>帮你找到志同道合的人</h3><p>在微博，在朋友圈，你可能找不到跟你志同道合的人，而在博客，你可以通过看他的几篇文章就迅速地理解认同这个人，即使你没有见过这个人，但你也可以通过这种关联来相互学习。</p><p>如果你在一个领域有相当的了解，你将这些内容发在网络上，网络上跟你志趣相投的人也会被你吸引过来，根据吸引力法则，你是怎样的人你就被怎么样的人吸引，这就是博客所能赋予你的魅力。</p><p>即使博客没有被他人关注，我们依然可以找到同好，你可以自己将博文转载到其他站点，人们会通过搜索引擎找到你，有邮件、微博等工具，我们不乏与他人交流的途径。by Gabriel Weinberg《Why I blog》</p><h3 id="记录成长"><a href="#记录成长" class="headerlink" title="记录成长"></a>记录成长</h3><p>隔一段时间，你再回头看你写的博客，你会发现自己正在通过这样的方式在不断的成长，这种成长在自己眼里是一种财富，在别人眼里是一张地图，你得到了收获，不断修正自己的错误，别人得到了指引，避免走弯路。</p><p>更多的情况是当你回望自己的时候你会发现自己是一个傻逼，so what，that is what I am！</p><h3 id="培养持续做一件事情的能力"><a href="#培养持续做一件事情的能力" class="headerlink" title="培养持续做一件事情的能力"></a>培养持续做一件事情的能力</h3><p>开始是坚持，后来是习惯，接着喜欢。以后当有人对你说，「你写那么多有用的东西，你真的很厉害啊！」你可以笑而不语，也可以大声说道：「你妹，你不知道我开始的时候多么痛苦！」</p><p>让你长久地去跑步，你可能做不到；让你每个月看一本书，你也可能做不到；但让你持续地写一个博客，你可以做得到。</p><p>你不相信？你不试试你怎么知道？</p><p>默默地持续做一件事是一种难得的能力，也是一种难得的品质。</p><h3 id="讨论反思"><a href="#讨论反思" class="headerlink" title="讨论反思"></a>讨论反思</h3><p>每人都会有思维的盲点，就好像这篇文章一样，可能你觉得我可能说得不对，你可以反驳我，我欢迎这种讨论，因为讨论的过程中会产生各种的思维的碰撞，这种碰撞会让你反思，也会激发出你新的灵感，这种讨论反思给自己的带来巨大的受益。</p><p>互联网给你的反馈就是让你承受更多，接受更多，成为一个更好的人。</p><p>###搜寻到你意想不到东西<br>世界不止是你的家，你的公司，你的朋友圈，你应该去发现一个更大的世界，通过写博客，你会知道世界上还有很多人像你一样在写博客，这些人和知识正在世界的某个角落在等着你。</p><p>例如，在写这篇文章的过程中，我才知道了Gabriel Weinberg，我才要将阳志平的博客重读一遍。写的过程会让你有很多新的发现，这些新的发现都值得你去再写下来，总结分享出去。</p><h3 id="一个人在做一件属于自己的事"><a href="#一个人在做一件属于自己的事" class="headerlink" title="一个人在做一件属于自己的事"></a>一个人在做一件属于自己的事</h3><p>很多你认为自己很牛逼的事情都是自己一个人做出来。</p><p>别人在刷微博，你在看书，别人在看穿越剧，你在学英文，别人在去唱K，你在写个人总结。吃饭也要找同伴，出游要找同伴，看电影要找同伴，你上一次一个人在做一件属于自己的事是在什么时候？</p><p>如果你想要清晰地思考，就必须远离人群。但是走得越远，你的处境就会越困难，收到的阻力也会越大。因为你没有迎合社会习俗，而是一步步地与它背道而驰。如果自己就是潮水的一部分 ，怎么能看见潮流的方向呢？你只能永远保持质疑，问自己，什么话是我不能说的？为什么？——Paul Graham《不能说的话》</p><h3 id="互联网的身份识别："><a href="#互联网的身份识别：" class="headerlink" title="互联网的身份识别："></a>互联网的身份识别：</h3><p>一个长期的价值博客是一份很好的简历。这里的“简历”并非是狭义上的求职简历，毕竟现在还没有到价值博客的时代，很多人写博客都是到处转载或者干脆碎碎念，正因此面试官未必拿个人博客当成了解一个人的更可靠窗口。</p><p>这里的“简历”是指一个让别人了解自己的窗口，虽然我们未必做得到像罗永浩、Keso这样的博客，个人的影响力已经足以支撑出一份事业（牛博和5gme），但至少你会因此而结识更多的人，你的博客价值越高，你结识的人就越牛，跟牛人交流又会让你的眼界得到极大的开阔，打开一扇又一扇你原本不知道的门，于是你就变得更牛… 这是一个良性循环。by 刘未鹏</p><h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>你可能想不到在白纸的左边（不值得写博客的原因）写什么了，想不到写个「博客时代已经过去」或者「我没有时间」也可以，但与此同时，你也可以用那些时间去思考一下「怎么做到长期写一个价值博客」。</p><!-- more -->]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一个选择&quot;&gt;&lt;a href=&quot;#一个选择&quot; class=&quot;headerlink&quot; title=&quot;一个选择&quot;&gt;&lt;/a&gt;一个选择&lt;/h3&gt;&lt;p&gt;我知道现在可能说这话有点不合时宜，毕竟博客时代都已经过去了，再号召大家用过就好像时的东西是不是有点逆流而上？&lt;/p&gt;
&lt;p&gt;我曾经也问过自己这个问题，但是我觉得，博客时代过去跟我们要开博客是没有多大关系的，就好像你的读书时代已经过去你就不再读书一样。&lt;/p&gt;
&lt;p&gt;判断一件事情值不值得去做有一个方法：在一张白纸的左边写不值得做的原因，然后在右边写值得做的原因，写完一比较，一权衡，自然能够得出结果。&lt;/p&gt;</summary>
    
    
    
    <category term="博客日记" scheme="https://drfengling.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="日记" scheme="https://drfengling.github.io/tags/%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
</feed>
